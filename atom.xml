<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://Busy-Bob.github.io</id>
    <title>å‹ºæµ·çš„åšå®¢</title>
    <updated>2021-01-14T09:09:25.812Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://Busy-Bob.github.io"/>
    <link rel="self" href="https://Busy-Bob.github.io/atom.xml"/>
    <subtitle>å°½åº”å°½ä¹‹äº‹ï¼Œåšè®©è‡ªå·±å¼€å¿ƒçš„äº‹ã€‚</subtitle>
    <logo>https://Busy-Bob.github.io/images/avatar.png</logo>
    <icon>https://Busy-Bob.github.io/favicon.ico</icon>
    <rights>All rights reserved 2021, å‹ºæµ·çš„åšå®¢</rights>
    <entry>
        <title type="html"><![CDATA[Pynq debugè®°å½•]]></title>
        <id>https://Busy-Bob.github.io/post/pynq-debug-ji-lu/</id>
        <link href="https://Busy-Bob.github.io/post/pynq-debug-ji-lu/">
        </link>
        <updated>2021-01-12T05:48:41.000Z</updated>
        <summary type="html"><![CDATA[<p>è®°å½•ä¸€äº›debugçš„ç»“æœã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>è®°å½•ä¸€äº›debugçš„ç»“æœã€‚</p>
<!-- more -->
<h1 id="dma-direct-memory-access-é—®é¢˜">DMA ï¼ˆDirect Memory Accessï¼‰ é—®é¢˜ï¼š</h1>
<p>ä»£ç è¿‡ç¨‹å‚è€ƒ<a href="https://pynq.readthedocs.io/en/latest/overlay_design_methodology/overlay_tutorial.html">Overlay Tutorial</a></p>
<ul>
<li><a href="https://www.fpgadeveloper.com/2014/08/using-the-axi-dma-in-vivado.html/">DMAçš„ä½¿ç”¨</a>ï¼š
<ul>
<li>MM2S stands for Memory-Mapped to Streaming, whereas S2MM stands for Streaming to Memory-Mapped.</li>
<li>ä¸‹å›¾ä¸<a href="https://pynq.readthedocs.io/en/latest/overlay_design_methodology/overlay_tutorial.html">Overlay Tutorial</a>å¯¹åº”å…³ç³»ï¼š
<ul>
<li>AXI DATA FIFO å¯¹åº” HLS ç”Ÿæˆçš„ constant multiply æ¨¡å—ã€‚</li>
<li>DDR memory controller å¯¹åº” AXI Interconnect IPæ ¸ã€‚<br>
<img src="https://Busy-Bob.github.io/post-images/1610431075588.png" alt="" loading="lazy"></li>
</ul>
</li>
</ul>
</li>
<li>ä¸‹é¢çš„ä»£ç Vivado HLS 2019.1  å’Œ Vitis HLS 2020.2 çš„HLSç»“æœä¸ä¸€æ ·ï¼ŒVitis æ²¡æœ‰ Tlastç­‰DMAéœ€è¦çš„ä¿¡å·ï¼Œå¹¶ä¸”æ•°æ®å®½åº¦ä¸º8ä½ã€‚</li>
</ul>
<pre><code class="language-C++">#include &quot;ap_axi_sdata.h&quot;
typedef ap_axiu&lt;32,1,1,1&gt; stream_type;

void mult_constant(stream_type* in_data, stream_type* out_data, ap_int&lt;32&gt; constant) {
#pragma HLS INTERFACE s_axilite register port=constant
#pragma HLS INTERFACE ap_ctrl_none port=return
#pragma HLS INTERFACE axis port=in_data
#pragma HLS INTERFACE axis port=out_data
    out_data-&gt;data = in_data-&gt;data * constant;
    out_data-&gt;dest = in_data-&gt;dest;
    out_data-&gt;id = in_data-&gt;id;
    out_data-&gt;keep = in_data-&gt;keep;
    out_data-&gt;last = in_data-&gt;last;
    out_data-&gt;strb = in_data-&gt;strb;
    out_data-&gt;user = in_data-&gt;user;

}
</code></pre>
<p><img src="https://Busy-Bob.github.io/post-images/1610431712612.png" alt="" loading="lazy"><br>
<img src="https://Busy-Bob.github.io/post-images/1610431721170.png" alt="" loading="lazy"></p>
<ul>
<li>DMA å¼€å¯ Scatter Gather åï¼Œ 1ã€è¾“å…¥æ—¶å€™æç¤ºå†…å­˜åœ°å€æ²¡æœ‰å¯¹é½6bytesã€‚2ã€ä¼šå¯¼è‡´recvchannel.wait()ï¼Œç³»ç»Ÿé™·å…¥ç­‰å¾…ã€‚å…³é—­å³<a href="https://discuss.pynq.io/t/fifo-using-pynq-dma/528">æ¢å¤æ­£å¸¸</a>ã€‚</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Xilinx FPGA æ¿ä¸Šç»“æ„çŸ¥è¯†æ‚è®°]]></title>
        <id>https://Busy-Bob.github.io/post/xilinx-fpga-ban-shang-jie-gou-zhi-shi-za-ji/</id>
        <link href="https://Busy-Bob.github.io/post/xilinx-fpga-ban-shang-jie-gou-zhi-shi-za-ji/">
        </link>
        <updated>2021-01-10T06:04:54.000Z</updated>
        <summary type="html"><![CDATA[<p>ä¸€ç‚¹xilinx fpga æ¿ä¸Šç»“æ„çš„çŸ¥è¯†ç‚¹ï¼Œè®°å½•ä¸‹æ¥ã€‚ä¸»è¦å‚è€ƒã€ŠåŸºäºFPGAçš„æ•°å­—ä¿¡å·å¤„ç†ã€‹ä¸€ä¹¦ç¬¬å…«ç« ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>ä¸€ç‚¹xilinx fpga æ¿ä¸Šç»“æ„çš„çŸ¥è¯†ç‚¹ï¼Œè®°å½•ä¸‹æ¥ã€‚ä¸»è¦å‚è€ƒã€ŠåŸºäºFPGAçš„æ•°å­—ä¿¡å·å¤„ç†ã€‹ä¸€ä¹¦ç¬¬å…«ç« ã€‚</p>
<!-- more -->
<h1 id="lutå’Œslice">LUTå’ŒSlice</h1>
<ul>
<li>zynq-7000ä¸­ä½¿ç”¨çš„æŸ¥æ‰¾è¡¨(Look Up Tableï¼ŒLUT)æ˜¯6ä½çš„ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª5ä½çš„LUTã€‚ï¼ˆ6ä½éœ€è¦çš„SRAMç©ºé—´æ˜¯2^6=64bitï¼Œ5ä½æ˜¯32bitã€‚è¿™åº”è¯¥ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆéœ€è¦ä¸€ä¸ªLUT5æ¥æ„æˆLUT6äº†ã€‚ï¼‰<br>
<img src="https://Busy-Bob.github.io/post-images/1610258789689.png" alt="" loading="lazy"></li>
<li>LUTå¯ä»¥ä½œä¸ºRAMå’ŒROMï¼Œ<strong>é€»è¾‘è¾“å…¥ä½œä¸ºåœ°å€çº¿</strong>ï¼Œå†…å­˜ä½œä¸ºROMæˆ–è€…RAMï¼Œè§<a href="https://electronics.stackexchange.com/a/85465">How does a LUT work, why is it used?</a>ã€‚å…¶ä¸­SLICEL(slice logic)åªèƒ½ä½œä¸ºROMï¼Œè€ŒSLICEM(slice memory)å¯ä»¥ä½œä¸ºROMå’Œåˆ†å¸ƒå¼çš„RAMã€‚</li>
</ul>
<table>
<thead>
<tr>
<th>LUTåŠŸèƒ½</th>
<th>SLICEL</th>
<th>SLICEM</th>
</tr>
</thead>
<tbody>
<tr>
<td>é€»è¾‘å‡½æ•°å‘ç”Ÿå™¨</td>
<td>âˆš</td>
<td>âˆš</td>
</tr>
<tr>
<td>ROM</td>
<td>âˆš</td>
<td>âˆš</td>
</tr>
<tr>
<td>åˆ†å¸ƒå¼RAM</td>
<td></td>
<td>âˆš</td>
</tr>
<tr>
<td>ç§»ä½å¯„å­˜å™¨</td>
<td></td>
<td>âˆš</td>
</tr>
</tbody>
</table>
<ul>
<li>ä½œä¸ºRAMä¹Ÿå¯ä»¥æœ‰å¤šç§ç±»å‹ï¼Œå„ç§éœ€è¦ä¸åŒæ•°é‡çš„LUTã€‚<br>
<img src="https://Busy-Bob.github.io/post-images/1610268719145.png" alt="" loading="lazy"></li>
<li>SLICEMä¸­1ä¸ªLUT6å¯é…ç½®ä¸º1ä¸ª32bitçš„ç§»ä½å¯„å­˜å™¨ï¼Œ<strong>é€»è¾‘è¾“å…¥ç«¯å£ä½œä¸ºæ—¶é’Ÿå‘¨æœŸå»¶æ—¶æ•°</strong>ï¼Œæ‰€ä»¥åœ¨Xilinx FPGAä¸­å®ç°FIFOçš„åŠŸèƒ½ï¼Œå¯é‡‡ç”¨Block RAMçš„æ–¹å¼ï¼Œä¹Ÿå¯é‡‡ç”¨LUTçš„æ–¹å¼ã€‚</li>
<li>ä¸€ä¸ªLUT6å¯å®ç°4é€‰1çš„MUX ï¼ˆæ•°æ®4ä½ï¼Œåœ°å€2ä½ï¼‰ã€‚</li>
<li>ä¸€ä¸ªF7MUXå’Œç›¸é‚»çš„ä¸¤ä¸ªLUT6å¯å®ç°ä¸€ä¸ª8é€‰1çš„MUXã€‚å› æ­¤ï¼Œä¸€ä¸ªSLICEå¯å®ç°2ä¸ª8é€‰1çš„MUXã€‚</li>
<li>4ä¸ªLUT6ã€F7AMUXã€F7BMUXå’ŒF8MUXå¯å®ç°ä¸€ä¸ª16é€‰1çš„MUXã€‚å› æ­¤ï¼Œä¸€ä¸ªSLICEå¯å®ç°ä¸€ä¸ª16é€‰1çš„MUX</li>
</ul>
<h1 id="dspåŸºæœ¬åŠŸèƒ½æ˜¯åšä¹˜æ³•è¿ç®—">DSPï¼šåŸºæœ¬åŠŸèƒ½æ˜¯åšä¹˜æ³•è¿ç®—</h1>
<ul>
<li>zynqä¸­çš„DSP(Digital Signal Processing)éƒ¨åˆ†æ˜¯ç”±DSP48E1ç»„æˆçš„ï¼Œç»„æˆåŸºæœ¬ç»“æ„å¦‚å›¾ï¼š<br>
<img src="https://Busy-Bob.github.io/post-images/1610267218196.png" alt="" loading="lazy"></li>
<li>ç”±äº”éƒ¨åˆ†æ„æˆï¼š
<ul>
<li>å¯¹å¤–ç«¯å£</li>
<li><strong>é¢„åŠ å™¨</strong>(pre-adder)</li>
<li><strong>ä¹˜æ³•å™¨</strong>(MULT)</li>
<li><strong>é€»è¾‘è¿ç®—å•å…ƒ</strong>(ALU)</li>
<li>æ¨¡å¼æ£€æµ‹ç”µè·¯<br>
<img src="https://Busy-Bob.github.io/post-images/1610267326031.png" alt="" loading="lazy"></li>
</ul>
</li>
<li>å¯¹å¤–<strong>ç«¯å£</strong>æœ‰ï¼š
<ul>
<li>æ“ä½œæ•°è¾“å…¥è¾“å‡ºç«¯å£</li>
<li>æ¨¡å¼é…ç½®ç«¯å£</li>
<li>çº§è”ç«¯å£<br>
<img src="https://Busy-Bob.github.io/post-images/1610267484853.png" alt="" loading="lazy"></li>
</ul>
</li>
<li>ç®€åŒ–ç»“æ„å›¾ä¸ºï¼š<br>
<img src="https://Busy-Bob.github.io/post-images/1610267801525.png" alt="" loading="lazy"></li>
<li>å•æŒ‡ä»¤å¤šæ•°æ®æ¨¡å¼å³SIMD ( Single Instruction, Multiple Data)ã€‚å®ƒä½¿å¾—48bitçš„ALUå¯é…ç½®ä¸º4ä¸ª 12bitçš„ALU (æ‰§è¡ŒåŠ æ³•ã€å‡æ³•æˆ–ä½é€»è¾‘è¿ç®—)æˆ–è€…2ä¸ª24bitçš„ALUã€‚</li>
<li>é‡‡ç”¨VHDLæˆ–Verilogä»£ç æè¿°æ—¶ï¼Œ<strong>ä¹˜æ³•ã€ä¹˜åŠ /ä¹˜å‡å’Œä¹˜ç´¯åŠ è¿ç®—ä¼šè¢«è‡ªåŠ¨æ˜ å°„ä¸º DSP48E1,è€ŒåŠ æ³•ã€å‡æ³•å’Œç´¯åŠ è¿ç®—é»˜è®¤æƒ…å†µä¸‹é‡†ç”¨å¸¸è§„é€»è¾‘èµ„æºå®ç°</strong>ã€‚è‹¥ä¹Ÿå¸Œæœ›å®ƒä»¬è¢«æ˜  å°„ä¸ºDSP48E1,åˆ™éœ€è¦é€šè¿‡ç»¼åˆå±æ€§use_dsp48å¯¹å…¶è¿›è¡Œçº¦æŸã€‚</li>
<li>åº”ç”¨ï¼š
<ul>
<li>48bitç´¯åŠ è¿ç®—(æ¯”åŠ æ³•å™¨å¤šä¸€ä¸ªå¯„å­˜å™¨ç”¨æ¥å­˜å–å‰é¢åŠ è¿‡çš„æ•°æ®ï¼Œå¯„å­˜å™¨æ˜¯éœ€è¦æ—¶é’Ÿé©±åŠ¨çš„ã€‚)</li>
<li>2è¾“å…¥48bitæ•°æ®ç›¸åŠ ä¹‹åç´¯åŠ </li>
<li>96bitåŠ æ³•ã€å‡æ³•è¿ç®—ï¼ˆéœ€è¦çº§è”ï¼‰</li>
<li>96bitç´¯åŠ è¿ç®—ï¼ˆéœ€è¦çº§è”ï¼‰</li>
<li>ä¹˜ç´¯åŠ è¿ç®—(ä¸¤ä¸ªè¾“å…¥æ•°æ®ç›¸ä¹˜å¹¶å¯¹ä¹˜ç§¯ç»“æœç´¯åŠ )ï¼š</li>
<li>å¤æ•°ä¹˜æ³•è¿ç®—</li>
</ul>
</li>
</ul>
<h1 id="bram-block-ram">BRAM (Block RAM)</h1>
<ul>
<li>å—RAM (æ ¹æ®åœ°å€å†™å…¥å’Œè¾“å‡º)</li>
<li>Block RAM (BRAM)åœ¨FPGAè®¾è®¡ä¸­æ‰®æ¼”ç€ä¸€ä¸ªé‡è¦çš„è§’è‰²å³æ•°æ®å­˜å‚¨æˆ–ç¼“å­˜</li>
<li>zynqä¸­æ¯ä¸ªBRAMè¾¾åˆ°äº† 36Kb,ç”±ä¸¤ä¸ª18Kb BRAMæ‹¼æ¥è€Œæˆ.</li>
<li>BRAMåœ¨ä¸ç‰ºç‰²å¾ˆå¤§å¸¦å®½çš„å‰æä¸‹ï¼Œæä¾›äº†æ›´å¤§çš„å‚¨å­˜å¯†åº¦ã€‚å¸¦å®½çš„ç‰ºç‰²ä¸»è¦åœ¨äº<strong>æ¯ä¸ªå‘¨æœŸBRAMåªæœ‰1-2ä¸ªå…¥å£å¯ä»¥è¢«æ¥é€š</strong>(å¯¹åº”å•ç«¯å£å’ŒåŒç«¯å£)ã€‚</li>
<li>åˆ©ç”¨BRAMå®ç°é€»è¾‘è¿ç®—åŠŸèƒ½æœ¬è´¨ä¸Šè€Œè¨€æ˜¯å°†BRAMé…ç½®ä¸ºROM,å®ƒå°±åƒä¸€ä¸ªå¤§çš„ æŸ¥æ‰¾è¡¨ï¼ˆLUTï¼‰ã€‚</li>
<li>å¯¹ä¸€äº›å›ºå®šçš„æ•°æ®è¿›è¡Œå­˜å‚¨ï¼Œè¿™å°±éœ€è¦ç”¨åˆ° ROMï¼Œå¯å­˜åœ¨BRAMé‡Œã€‚</li>
</ul>
<h1 id="å•ç«¯å£ram-ä¼ªåŒç«¯å£ramåŒç«¯å£ramå’Œfifo"><a href="https://zhuanlan.zhihu.com/p/96616326">å•ç«¯å£RAMã€ä¼ªåŒç«¯å£RAMï¼ŒåŒç«¯å£RAMå’ŒFIFO</a></h1>
<ul>
<li>å•ç«¯å£RAMï¼ˆSingle-Port RAMï¼‰
<ul>
<li>è¾“å…¥åªæœ‰<strong>ä¸€ç»„æ•°æ®çº¿</strong>å’Œ<strong>ä¸€ç»„åœ°å€çº¿</strong></li>
<li>åªæœ‰ä¸€ä¸ªæ—¶é’Ÿ</li>
<li><strong>è¯»å†™å…±ç”¨åœ°å€çº¿</strong></li>
<li>æ‰€ä»¥ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸåªèƒ½è¯»æˆ–è€…åªèƒ½å†™ã€‚</li>
</ul>
</li>
<li>ä¼ªåŒç«¯å£RAMï¼ˆSimple Dual-Port RAMï¼‰
<ul>
<li>è¾“å…¥æœ‰<strong>ä¸€ç»„æ•°æ®çº¿</strong>ï¼Œ<strong>ä¸¤ç»„åœ°å€çº¿</strong>ã€‚</li>
<li><strong>ä¸¤ä¸ªæ—¶é’Ÿ</strong>ã€‚</li>
<li>ä¸€ä¸ªç«¯å£åªè¯»ï¼Œå¦ä¸€ä¸ªç«¯å£åªå†™ï¼Œä½†å†™å…¥å’Œè¯»å–çš„æ—¶é’Ÿå¯ä»¥ä¸åŒï¼Œä¸”ä½å®½æ¯”å¯ä»¥ä¸æ˜¯1:1</li>
</ul>
</li>
<li>åŒç«¯å£RAMï¼ˆTrue Dual-Port RAMï¼‰
<ul>
<li>è¾“å…¥æœ‰<strong>ä¸¤ç»„åœ°å€çº¿</strong>å’Œ<strong>ä¸¤ç»„æ•°æ®çº¿</strong></li>
<li><strong>ä¸¤ä¸ªæ—¶é’Ÿ</strong></li>
<li>ä¸¤ä¸ªç«¯å£éƒ½æœ‰è¯»å†™çš„åŠŸèƒ½ã€‚</li>
</ul>
</li>
<li>FIFO (First-in, first-out)
<ul>
<li>ä¸€ä¸ªç«¯å£åªè¯»ï¼Œå¦ä¸€ä¸ªç«¯å£åªå†™ã€‚</li>
<li><strong>å…ˆå…¥å…ˆå‡ºï¼Œæ²¡æœ‰åœ°å€çº¿</strong></li>
<li>ä¸Šè¿°ä¸‰ç§RAMéƒ½å¯ä»¥å¯»å€ï¼Œ<strong>FIFOä¸èƒ½å¯»å€</strong>ã€‚</li>
</ul>
</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Zynq ä¸­æŸ¥çœ‹ç”¨HLS ç”Ÿæˆçš„IPæ ¸ç«¯å£å¯¹åº”çš„å†…å­˜ç©ºé—´]]></title>
        <id>https://Busy-Bob.github.io/post/zynq-zhong-cha-kan-yong-hls-sheng-cheng-de-ip-he-duan-kou-dui-ying-de-nei-cun-kong-jian/</id>
        <link href="https://Busy-Bob.github.io/post/zynq-zhong-cha-kan-yong-hls-sheng-cheng-de-ip-he-duan-kou-dui-ying-de-nei-cun-kong-jian/">
        </link>
        <updated>2021-01-07T09:34:33.000Z</updated>
        <summary type="html"><![CDATA[<p>æ‰¾äº†ä¸€ä¼šå„¿æ‰æ‰¾åˆ°, æ‰€ä»¥è®°å½•ä¸‹æ¥ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>æ‰¾äº†ä¸€ä¼šå„¿æ‰æ‰¾åˆ°, æ‰€ä»¥è®°å½•ä¸‹æ¥ã€‚</p>
<!-- more -->
<p>ç”¨HLSç”Ÿæˆçš„ipæ ¸ï¼Œä½¿ç”¨axi-liteåè®®ï¼Œæ‰¾ä¸åˆ°pynqä¸­topå‡½æ•°å˜é‡å¯¹åº”çš„å†…å­˜ç©ºé—´åœ°å€ã€‚</p>
<ul>
<li>
<p>HLSä¸­ï¼ŒSynthesis Summaryçš„æœ€åä¸€é¡¹å¯ä»¥çœ‹åˆ°HW info.<br>
<img src="https://Busy-Bob.github.io/post-images/1610107689191.png" alt="" loading="lazy"></p>
</li>
<li>
<p>HLSç”Ÿæˆçš„verilogæ–‡ä»¶(XXXXX_control_s_axi.v)ä¸­ï¼Œæœ‰æ¥å£åœ°å€ä¿¡æ¯çš„æ³¨é‡Šã€‚</p>
</li>
</ul>
<pre><code>//------------------------Address Info-------------------
// 0x00 : reserved
// 0x04 : reserved
// 0x08 : reserved
// 0x0c : reserved
// 0x10 : Data signal of a
//        bit 31~0 - a[31:0] (Read/Write)
// 0x14 : reserved
// 0x18 : Data signal of b
//        bit 31~0 - b[31:0] (Read/Write)
// 0x1c : reserved
// 0x20 : Data signal of c
//        bit 31~0 - c[31:0] (Read)
// 0x24 : Control signal of c
//        bit 0  - c_ap_vld (Read/COR)
//        others - reserved
// (SC = Self Clear, COR = Clear on Read, TOW = Toggle on Write, COH = Clear on Handshake)
</code></pre>
<ul>
<li>pynqä¸­ï¼Œå¯é€šè¿‡<code>register_map</code>ç›´æ¥æŸ¥çœ‹åœ°å€ï¼Œæˆ–è€…ç›´æ¥æ“ä½œå˜é‡ã€‚</li>
</ul>
<pre><code class="language-python">from pynq import Overlay
overlay = Overlay('./design_1.bit')
add_ip = overlay.add_0

add_ip.register_map.a = 3
add_ip.register_map.b = 4
c = add_ip.register_map.c
c.address
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Vitis HLS Coding Styles]]></title>
        <id>https://Busy-Bob.github.io/post/vitis-hls-coding-styles/</id>
        <link href="https://Busy-Bob.github.io/post/vitis-hls-coding-styles/">
        </link>
        <updated>2021-01-04T08:57:57.000Z</updated>
        <summary type="html"><![CDATA[<p>å‚è€ƒXilinxæ–‡æ¡£ï¼Œ<a href="https://www.xilinx.com/html_docs/xilinx2020_2/vitis_doc/vitis_hls_coding_styles.html">Vitis HLS Coding Styles</a></p>
]]></summary>
        <content type="html"><![CDATA[<p>å‚è€ƒXilinxæ–‡æ¡£ï¼Œ<a href="https://www.xilinx.com/html_docs/xilinx2020_2/vitis_doc/vitis_hls_coding_styles.html">Vitis HLS Coding Styles</a></p>
<!-- more -->
<h1 id="ä¸æ”¯æŒçš„ccéƒ¨åˆ†">ä¸æ”¯æŒçš„C/C++éƒ¨åˆ†</h1>
<h2 id="ç³»ç»Ÿè°ƒç”¨">ç³»ç»Ÿè°ƒç”¨</h2>
<ul>
<li><code>printf()</code>ï¼Œ <code>fprintf(stdout,)</code>ç­‰ä¸ä¼šå½±å“ç®—æ³•æ‰§è¡Œçš„ç³»ç»Ÿè°ƒç”¨â€”â€”å¿½ç•¥æ‰ã€‚</li>
<li><code>getc()</code>, <code>time()</code>, <code>sleep()</code> ç­‰ç³»ç»Ÿè°ƒç”¨â€”â€”ä¸è¢«æ¥å—ã€‚</li>
<li>å¯ä»¥ä½¿ç”¨<code>__SYNTHESIS__</code>å®æ¥åŒºåˆ†<strong>ç»¼åˆ</strong>ä¸<strong>è°ƒè¯•</strong>è¿‡ç¨‹</li>
</ul>
<pre><code class="language-c">void hier_func4(din_t A, din_t B, dout_t *C, dout_t *D)
{
    dint_t apb, amb;

    sumsub_func(&amp;A, &amp;B, &amp;apb, &amp;amb);
#ifndef __SYNTHESIS__
    FILE *fp1; // The following code is ignored for synthesis
    char filename[255];
    sprintf(filename, Out_apb_ % 03d.dat, apb);
    fp1 = fopen(filename, w);
    fprintf(fp1, % d \n, apb);
    fclose(fp1);
#endif
    shift_func(&amp;apb, &amp;amb, C, D);
}

</code></pre>
<h2 id="åŠ¨æ€å†…å­˜">åŠ¨æ€å†…å­˜</h2>
<ul>
<li><code>malloc()</code>ï¼Œ <code>new</code> ç­‰åŠ¨æ€åˆ†é…å†…å­˜çš„ä¸è¡Œ, ä¸èƒ½åœ¨å †ä¸Šåˆ†é…å†…å­˜ï¼Œå¿…é¡»åœ¨æ ˆä¸Šã€‚ï¼ˆå› ä¸ºè¯¥HLSæŠ€æœ¯æ˜¯é™æ€åˆ†æï¼‰</li>
<li>ä¸€ç§æ”¹åŠ¨æ–¹æ³•æ˜¯ç›´æ¥å¯¹æ ˆä¸Šå˜é‡å–æŒ‡é’ˆï¼š</li>
</ul>
<pre><code class="language-C">#include &quot;malloc_removed.h&quot;
#include &lt;stdlib.h&gt;
//#define NO_SYNTH

dout_t malloc_removed(din_t din[N], dsel_t width) {  

#ifdef NO_SYNTH
 long long *out_accum = malloc (sizeof(long long));
 int* array_local = malloc (64 * sizeof(int));
#else
 long long _out_accum;
 long long *out_accum = &amp;_out_accum;
 int _array_local[64];
 int* array_local = &amp;_array_local[0];
#endif
// ä¸­é—´è®¡ç®—çœç•¥
 return *out_accum;
}
</code></pre>
<h2 id="æŒ‡é’ˆçš„ä¸€äº›é™åˆ¶">æŒ‡é’ˆçš„ä¸€äº›é™åˆ¶</h2>
<h3 id="é€šç”¨æŒ‡é’ˆç±»å‹è½¬æ¢">é€šç”¨æŒ‡é’ˆç±»å‹è½¬æ¢</h3>
<p>HLS åªæ”¯æŒC/C++åŸç”Ÿç±»å‹çš„è½¬æ¢</p>
<h3 id="æŒ‡é’ˆæ•°ç»„">æŒ‡é’ˆæ•°ç»„</h3>
<p>å¦‚æœæ¯ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæ ‡é‡æˆ–ä¸€ä¸ªæ ‡é‡æ•°ç»„ï¼Œåˆ™Vitis HLSæ”¯æŒæŒ‡é’ˆæ•°ç»„çš„ç»¼åˆã€‚ä½†æŒ‡é’ˆæ•°ç»„ä¸èƒ½æŒ‡å‘é¢å¤–çš„æŒ‡é’ˆï¼ˆåº”è¯¥ç±»ä¼¼äºŒç»´æ•°ç»„çš„è¡Œã€åˆ—æŒ‡é’ˆï¼‰</p>
<h3 id="å‡½æ•°æŒ‡é’ˆ">å‡½æ•°æŒ‡é’ˆ</h3>
<p>ä¸æ”¯æŒ</p>
<h2 id="é€’å½’å‡½æ•°">é€’å½’å‡½æ•°</h2>
<ul>
<li>ä¸æ”¯æŒã€‚ä¸ç®¡æœ€åé€’å½’æ¬¡æ•°æ˜¯ä¸æ˜¯æœ‰é™çš„ã€‚</li>
<li>å¯ä»¥ä½¿ç”¨C++æ¨¡æ¿æ¥æ„é€ <strong>å¯ä»¥ç”¨æ¥ç»¼åˆçš„å°¾é€’å½’</strong>ï¼Œå› ä¸ºC++ä¸­æ”¯æŒéç±»å‹æ¨¡æ¿å‚æ•°ï¼ˆNontype Template Parametersï¼‰ï¼Œç±»ä¼¼Rustä¸­çš„constæ³›å‹ï¼Œè¿™å„¿çš„æ¨¡æ¿å‚æ•°ä¸º<code>data_t</code>ç±»å‹çš„ä¸€ä¸ªå€¼ Nã€‚<a href="https://github.com/Xilinx/HLS-Tiny-Tutorials/tree/master/algorithm_template_fir_filter">ä¾‹å­å¦‚ä¸‹</a>ï¼š</li>
</ul>
<pre><code class="language-C++">// Tail recursive call
template&lt;data_t N&gt; 
	struct fibon_s {
    template&lt;typename T&gt;
    static T fibon_f(T a, T b) {
		return fibon_s&lt;N-1&gt;::fibon_f(b, (a+b));
  }
};

// Termination condition
template&lt;&gt; struct fibon_s&lt;1&gt; {
  template&lt;typename T&gt;
  static T fibon_f(T a, T b) {
    return b;
  }
};

void cpp_template(data_t a, data_t b, data_t &amp;dout){
  dout = fibon_s&lt;FIB_N&gt;::fibon_f(a,b);
}
</code></pre>
<h2 id="stl">STL</h2>
<p>æœ‰åŠ¨æ€å†…å­˜å’Œé€’å½’ï¼Œä¸èƒ½ä½¿ç”¨ã€‚</p>
<h1 id="å‡½æ•°">å‡½æ•°</h1>
<p>é¡¶å±‚å‡½æ•°ä¸èƒ½æ˜¯é™æ€çš„ã€‚</p>
<h2 id="å†…è”å‡½æ•°">å†…è”å‡½æ•°</h2>
<ul>
<li>ç»¼åˆæ—¶å€™èŠ±è´¹æ—¶é—´ã€å†…å­˜è¾ƒå¤šï¼Œä½†æ•ˆæœæ›´å¥½ã€‚</li>
<li>æ²¡æœ‰ç‹¬ç«‹çš„RTLæ–‡ä»¶å’ŒæŠ¥å‘Šäº†ã€‚</li>
</ul>
<h2 id="ä»£ç é£æ ¼çš„å½±å“">ä»£ç é£æ ¼çš„å½±å“</h2>
<ul>
<li>å½±å“å‡½æ•°å‚æ•°å’Œæ¥å£</li>
<li>ç›´æ¥ç”¨å‡½æ•°æ¥å£çš„è¾“å…¥é‡æ¥é©±åŠ¨å˜é‡æ—¶å€™ï¼Œç¨‹åºå°±ä¸ä¼šä½¿ç”¨æŸäº›ä¼˜åŒ–æ‰‹æ®µã€‚ï¼ˆå¦‚è¾“å…¥é‡æ˜¯å¾ªç¯ç´¢å¼•çš„ä¸Šé™ï¼‰</li>
</ul>
<pre><code class="language-C++">#include &quot;ap_int.h&quot;

ap_int&lt;24&gt; foo(int x, int y) {  
 int tmp;

 tmp = (x * y);
 return tmp
} 
</code></pre>
<p>ä¸Šè¿°ä»£ç è¿™ä¼šå¯¼è‡´ä¸€ä¸ª32-bitä¹˜æ³•å™¨ï¼Œè¾“å‡ºå†è¢«æˆªå–ã€‚<br>
ä¸‹é¢è¿™ä¸ªä»£ç ç›´æ¥äº§ç”Ÿä¸€ä¸ª24-bitä¹˜æ³•å™¨ã€‚</p>
<pre><code class="language-C++">#include &quot;ap_int.h&quot;
typedef ap_int&lt;12&gt; din_t;
typedef ap_int&lt;24&gt; dout_t;

dout_t func_sized(din_t x, din_t y) {  
 int tmp;

 tmp = (x * y);
 return tmp
}
</code></pre>
<h2 id="ccå†…ç½®å‡½æ•°">C/C++å†…ç½®å‡½æ•°</h2>
<ul>
<li>åªæ”¯æŒä»¥ä¸‹ä¸¤ä¸ª</li>
<li><code>__builtin_clz(unsigned int x)</code>: Returns the number of leading 0-bits in x, starting at the most significant bit position. If x is 0, the result is undefined.</li>
<li><code>__builtin_ctz(unsigned int x)</code>: Returns the number of trailing 0-bits in x, starting at the least significant bit position. If x is 0, the result is undefined.</li>
</ul>
<h1 id="å¾ªç¯">å¾ªç¯</h1>
<ul>
<li>æ”¯æŒå¾—å¾ˆå¥½ã€‚å¯ä»¥åˆ‡æµæ°´çº¿ï¼Œå±•å¼€ã€éƒ¨åˆ†å±•å¼€ã€åˆå¹¶å’Œæ‰å¹³åŒ–</li>
<li><strong>ä¸è¦ä½¿ç”¨å…¨å±€å˜é‡ä½œä¸ºå¾ªç¯å˜é‡</strong>ï¼Œå¦åˆ™ä¼šé˜»ç¢ä»£ç ä¼˜åŒ–</li>
</ul>
<h2 id="å¾ªç¯å˜é‡èŒƒå›´">å¾ªç¯å˜é‡èŒƒå›´</h2>
<ul>
<li>å¾ªç¯å˜é‡çš„ä¸Šé™å¦‚æœæ˜¯å˜é‡ï¼Œå°±éš¾ä»¥åœ¨ç»¼åˆæ—¶å€™ä¼˜åŒ–ã€‚</li>
<li>å¾ªç¯å˜é‡çš„ä¸Šé™å¦‚æœæ˜¯å˜é‡ï¼Œå¾ªç¯çš„latencyæ— æ³•ç¡®å®šã€‚</li>
<li>å¾ªç¯å˜é‡çš„ä¸Šé™å¦‚æœæ˜¯å˜é‡ï¼Œè®¾è®¡çš„æ€§èƒ½æœªçŸ¥ã€‚</li>
</ul>
<pre><code class="language-C++">#include &quot;ap_int.h&quot;
#define N 32

typedef ap_int&lt;8&gt; din_t;
typedef ap_int&lt;13&gt; dout_t;
typedef ap_uint&lt;5&gt; dsel_t;

dout_t code028(din_t A[N], dsel_t width) {  

 dout_t out_accum=0;
 dsel_t x;

 LOOP_X:for (x=0;x&lt;width; x++) {
 out_accum += A[x];
 }

 return out_accum;
}
</code></pre>
<p>ä¸ºäº†å…‹æœæ— æ³•åˆ†ææ€§èƒ½çš„ç¼ºç‚¹ï¼Œä¸€èˆ¬æ˜¯åŠ ä¸Š<br>
<code>#pragma HLS loop_tripcount min=&lt;int&gt; max=&lt;int&gt; avg=&lt;int&gt;</code><br>
æˆ–è€…æ˜¯ä½¿ç”¨æ–­è¨€<code>assert</code></p>
<pre><code class="language-C++">void foo (num_samples, ...) {
  int i;
  ...
  loop_1: for(i=0;i&lt; num_samples;i++) {
   #pragma HLS loop_tripcount min=12 max=16
   ...
    result = a + b;
  }
}
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šè¯¥ç¼–è¯‘é€‰é¡¹åªç”¨äºåˆ†æï¼Œä¸ä¼šç”¨äºç»¼åˆã€‚</p>
<ul>
<li><strong>å¯¹äºå…·æœ‰å¯å˜è¾¹ç•Œçš„å¾ªç¯çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼šåœ¨å¾ªç¯ä¸­æœ‰æ¡ä»¶åœ°æ‰§è¡Œï¼Œå¹¶ä¸”ä»¤å¾ªç¯è¿­ä»£çš„æ¬¡æ•°ä¸ºå›ºå®šå€¼ã€‚</strong></li>
</ul>
<pre><code class="language-C++">#include &quot;ap_int.h&quot;
#define N 32

typedef ap_int&lt;8&gt; din_t;
typedef ap_int&lt;13&gt; dout_t;
typedef ap_uint&lt;5&gt; dsel_t;

dout_t loop_max_bounds(din_t A[N], dsel_t width) {  

 dout_t out_accum=0;
 dsel_t x;

 LOOP_X:for (x=0; x&lt;N; x++) {
 if (x&lt;width) {
  out_accum += A[x];
 }
 }

 return out_accum;
}
</code></pre>
<h2 id="å°†å¾ªç¯æµæ°´çº¿åŒ–">å°†å¾ªç¯æµæ°´çº¿åŒ–</h2>
<p>é€šå¸¸é€šè¿‡æµæ°´çº¿æœ€å†…å±‚çš„å¾ªç¯æ¥æ‰¾åˆ°é¢ç§¯å’Œæ€§èƒ½ä¹‹é—´çš„æœ€ä½³å¹³è¡¡ã€‚</p>
<pre><code class="language-C++">#include &quot;loop_pipeline.h&quot;

dout_t loop_pipeline(din_t A[N]) {  

 int i,j;
 static dout_t acc;

 LOOP_I:for(i=0; i &lt; 20; i++){
 LOOP_J: for(j=0; j &lt; 20; j++){
 acc += A[i] * j;
 }
 }

 return acc;
}
</code></pre>
<ul>
<li>
<p>Pipeline <code>LOOP_J</code></p>
<ul>
<li>åªéœ€è°ƒåº¦ä¸€ä¸ªä¹˜æ³•å™¨æ“ä½œå’Œä¸€ä¸ªæ•°ç»„è®¿é—®</li>
<li>Latency is approximately 400 cycles (20x20) and requires less than 100 LUTs and registers (the I/O control and FSM are always present).</li>
</ul>
</li>
<li>
<p>Pipeline <code>LOOP_I</code></p>
<ul>
<li>å†…éƒ¨å¾ªç¯å±•å¼€20æ¬¡ã€‚</li>
<li>éœ€è°ƒåº¦20ä¸ªä¹˜æ³•å™¨æ“ä½œå’Œ20ä¸ªæ•°ç»„è®¿é—®</li>
<li>Latency is approximately 20 cycles but requires a few hundred LUTs and registers. About 20 times the logic as first option, minus any logic optimizations that can be made.</li>
</ul>
</li>
<li>
<p>Pipeline <code>function loop_pipeline</code></p>
<ul>
<li>éœ€è°ƒåº¦400ä¸ªä¹˜æ³•å™¨æ“ä½œå’Œ400ä¸ªæ•°ç»„è®¿é—®</li>
<li>Latency is approximately 10 (20 dual-port accesses) but requires thousands of LUTs and registers (about 400 times the logic of the first option minus any optimizations that can be made)</li>
</ul>
</li>
</ul>
<h3 id="ä¸å®Œç¾çš„å¾ªç¯åµŒå¥—">ä¸å®Œç¾çš„å¾ªç¯åµŒå¥—</h3>
<p>ä¸å®Œç¾çš„å¾ªç¯åµŒå¥—ï¼Œæˆ–è€…æ— æ³•å°†å¾ªç¯åµŒå¥—å±•å¼€ï¼Œä¼šå¯¼è‡´è¿›å…¥å’Œé€€å‡ºå¾ªç¯çš„é¢å¤–æ—¶é’Ÿå‘¨æœŸã€‚</p>
<h2 id="å¾ªç¯å¹¶è¡Œ">å¾ªç¯å¹¶è¡Œ</h2>
<ul>
<li>HLSä¼šä½¿å¾—é€»è¾‘å’Œå‡½æ•°å¹¶è¡Œï¼Œä½†æ˜¯å¹¶ä¸ä¼šè°ƒåº¦å¾ªç¯æ¥å¹¶è¡Œã€‚</li>
<li>ä¾‹å­ä¸­SUM_Xå’ŒSUM_Yä¸ä¼šå¹¶è¡Œè°ƒåº¦ï¼Œè€Œæ˜¯é¡ºåºçš„ã€‚ï¼ˆå› ä¸ºä¸¤ä¸ªå¾ªç¯å˜é‡æœ‰ä¸åŒçš„ä¸Šé™ï¼‰</li>
</ul>
<pre><code class="language-C++">#include &quot;loop_sequential.h&quot;

void loop_sequential(din_t A[N], din_t B[N], dout_t X[N], dout_t Y[N], 
 dsel_t xlimit, dsel_t ylimit) {  

 dout_t X_accum=0;
 dout_t Y_accum=0;
 int i,j;

 SUM_X:for (i=0;i&lt;xlimit; i++) {
 X_accum += A[i];
 X[i] = X_accum;
}

 SUM_Y:for (i=0;i&lt;ylimit; i++) {
 Y_accum += B[i];
 Y[i] = Y_accum;
 }
} 
</code></pre>
<p>æŠŠä¸¤ä¸ªå¾ªç¯è£…åœ¨functioné‡Œé¢å°±å¯ä»¥å¹¶è¡Œäº†</p>
<pre><code class="language-C++">#include &quot;loop_functions.h&quot;

void sub_func(din_t I[N], dout_t O[N], dsel_t limit) {
 int i;
 dout_t accum=0;
  
 SUM:for (i=0;i&lt;limit; i++) {
 accum += I[i];
 O[i] = accum;
 }

}

void loop_functions(din_t A[N], din_t B[N], dout_t X[N], dout_t Y[N], 
 dsel_t xlimit, dsel_t ylimit) {

 sub_func(A,X,xlimit);
 sub_func(B,Y,ylimit);
}
</code></pre>
<ul>
<li>è¿™æ˜¯åœ¨å‡½æ•°ä¸­æ•è·å¾ªç¯ä»¥åˆ©ç”¨å¹¶è¡Œæ€§çš„åŸåˆ™</li>
</ul>
<h2 id="å¾ªç¯ä¾èµ–">å¾ªç¯ä¾èµ–</h2>
<ul>
<li>ä¸€æ¬¡å¾ªç¯å¼€å§‹å¯èƒ½ä¼šä¾èµ–ä¸Šä¸€æ¬¡å¾ªç¯çš„ç»“æŸã€‚</li>
</ul>
<pre><code class="language-C++"> Minim_Loop: while (a != b) { 
 if (a &gt; b) 
 a -= b; 
 else 
 b -= a;
 }
</code></pre>
<ul>
<li>è§£å†³æ–¹æ¡ˆæ˜¯<strong>å°½é‡ç¡®ä¿åˆå§‹æ“ä½œå°½æ—©æ‰§è¡Œ</strong>(åº”è¯¥å°±æ˜¯å¯¹å¾ªç¯å˜é‡åšä¿®æ”¹ç­‰)</li>
</ul>
<h2 id="åœ¨cç±»ä¸­ä¸ä¼šå±•å¼€å¾ªç¯">åœ¨c++ç±»ä¸­ä¸ä¼šå±•å¼€å¾ªç¯</h2>
<ul>
<li>åº”å°å¿ƒç¡®ä¿å¾ªç¯å½’çº³å˜é‡ä¸æ˜¯ç±»çš„æ•°æ®æˆå‘˜ï¼Œå› ä¸ºè¿™ä¼šé˜²æ­¢å¾ªç¯è¢«å±•å¼€ã€‚</li>
</ul>
<pre><code class="language-C++">template &lt;typename T0, typename T1, typename T2, typename T3, int N&gt;
class foo_class
{
private:
    pe_mac&lt;T0, T1, T2&gt; mac;

public:
    T0 areg;
    T0 breg;
    T2 mreg;
    T1 preg;
    T0 shift[N];
    int k; // Class Member
    T0 shift_output;
    void exec(T1 *pcout, T0 *dataOut, T1 pcin, T3 coeff, T0 data, int col)
    {
    Function_label0:;
#pragma HLS inline off
    SRL:
        for (k = N - 1; k &gt;= 0; --k)
        {
#pragma HLS unroll // Loop will fail UNROLL
            if (k &gt; 0)
                shift[k] = shift[k - 1];
            else
                shift[k] = data;
        }

        *dataOut = shift_output;
        shift_output = shift[N - 1];
    }

    *pcout = mac.exec1(shift[4 * col], coeff, pcin);
};
</code></pre>
<h1 id="æ•°ç»„">æ•°ç»„</h1>
<ul>
<li>ä»¿çœŸæ—¶å€™å†…å­˜ä¸å¤Ÿæ€ä¹ˆåŠï¼Ÿä¸€ä¸ªå¦¥åçš„æ–¹æ³•æ˜¯åŠ¨æ€å†…å­˜ã€‚</li>
<li>å®šç‚¹æ•°å ç”¨å†…å­˜ &gt;  arbitrary precision type &gt; Cè‡ªå¸¦ç±»å‹</li>
</ul>
<pre><code class="language-C++">#include &quot;ap_int.h&quot;
  
  int i, acc; 
#ifdef __SYNTHESIS__
  // Use an arbitrary precision type &amp; array for synthesis
  ap_int&lt;32&gt;  la0[10000000], la1[10000000]; 
#else 
  // Use an arbitrary precision type &amp; dynamic memory for simulation
 ap_int&lt;int32&gt; *la0 = malloc(10000000  * sizeof(ap_int&lt;32&gt;));
 ap_int&lt;int32&gt; *la1 = malloc(10000000  * sizeof(ap_int&lt;32&gt;));
#endif
  for (i=0 ; i &lt; 10000000; i++) { 
      acc = acc + la0[i] + la1[i]; 
  } 
</code></pre>
<ul>
<li><strong>æ•°ç»„é•¿åº¦å°äº1024</strong>ï¼šå®ä¾‹åŒ–ä¸ºFIFO</li>
<li><strong>æ•°ç»„é•¿åº¦å¤§äº1024</strong>ï¼š ä¿å­˜åœ¨block RAMæˆ–LUTRAMæˆ–UltraRAM</li>
</ul>
<h2 id="æ•°ç»„è®¿é—®å’Œæ€§èƒ½">æ•°ç»„è®¿é—®å’Œæ€§èƒ½</h2>
<ul>
<li>å¯¹æ•°ç»„è®¿é—®æ¬¡æ•°è¶Šå¤šï¼Œè¶Šä¼šé™åˆ¶æ€§èƒ½ã€‚ï¼ˆå°¤å…¶æ˜¯åœ¨ä¸€ä¸ªå¾ªç¯ä¸­çš„æƒ…å†µï¼‰</li>
<li>æ‰€ä»¥æœ‰å¦‚ä¸‹çš„æ›´æ”¹ç­–ç•¥ï¼š</li>
</ul>
<pre><code class="language-C++">#include &quot;array_mem_bottleneck.h&quot;
 
dout_t array_mem_bottleneck(din_t mem[N]) {  

 dout_t sum=0;
 int i;

 SUM_LOOP:for(i=2;i&lt;N;++i)
   sum += mem[i] + mem[i-1] + mem[i-2];
    
 return sum;
}
</code></pre>
<p>å˜æˆ</p>
<pre><code class="language-C++">#include &quot;array_mem_perform.h&quot;
 
dout_t array_mem_perform(din_t mem[N]) {  

 din_t tmp0, tmp1, tmp2;
 dout_t sum=0;
 int i;

 tmp0 = mem[0];
 tmp1 = mem[1];
 SUM_LOOP:for (i = 2; i &lt; N; i++) { 
 tmp2 = mem[i];
 sum += tmp2 + tmp1 + tmp0;
 tmp0 = tmp1;
 tmp1 = tmp2;
 } 
    
 return sum;
}
</code></pre>
<h3 id="fifoè®¿é—®">FIFOè®¿é—®</h3>
<p>å› ä¸ºæ˜¯å…ˆå…¥å…ˆå‡ºï¼Œæ‰€ä»¥å¿…é¡»è¦ä»0å¼€å§‹é¡ºåºè®¿é—®ã€‚</p>
<h2 id="æ¥å£ä¸Šçš„æ•°ç»„topå‡½æ•°å‚æ•°">æ¥å£ä¸Šçš„æ•°ç»„ï¼ˆtopå‡½æ•°å‚æ•°ï¼‰</h2>
<p>HLSä¼šé»˜è®¤ä¼šå°†æ¥å£ä¸Šæ•°ç»„è®¤ä¸ºæ˜¯å†…å­˜ã€‚HLSæœ‰ä¸¤ç§å‡è®¾çš„å®ç°æ–¹å¼</p>
<ul>
<li><strong>off-chipçš„å†…å­˜</strong>ï¼š</li>
<li><strong>æ ‡å‡†çš„block RAMï¼Œå»¶è¿Ÿåªæœ‰1clock</strong>ï¼š æ•°æ®ä¼šåœ¨åœ°å€ç»™å®šåä¸€ä¸ªå‘¨æœŸå‡†å¤‡å¥½ã€‚</li>
</ul>
<p>æ‰€ä»¥éœ€è¦ï¼š</p>
<ul>
<li>æŒ‡å®šæ˜¯RAMè¿˜æ˜¯FIFOçš„æ¥å£</li>
<li>æŒ‡å®šRAMæ˜¯å•ç«¯å£è¿˜æ˜¯åŒç«¯å£çš„RAMï¼Œé¢„ç¼–è¯‘é€‰é¡¹ä¸­çš„<code>storage_type</code>ï¼Œè¯­æ³•æ˜¯<a href="https://www.xilinx.com/html_docs/xilinx2020_2/vitis_doc/hls_pragmas.html#jit1504034365862__ad411155">#pragma HLS interface</a></li>
<li>æŒ‡å®šRAMå»¶æ—¶ï¼Œ <code>latency</code></li>
<li>ARRAY_PARTITION, ARRAY_RESHAPE ä¸¤ä¸ªä¼˜åŒ–è¾“å…¥çš„å‘½ä»¤ã€‚è¯­æ³•æ˜¯<a href="https://www.xilinx.com/html_docs/xilinx2020_2/vitis_doc/hls_pragmas.html?#ariaid-title4">#pragma HLS array_partition</a>ï¼Œ ç›¸å½“äº<strong>ç”¨å¯„å­˜å™¨ä»£æ›¿RAM</strong>ï¼Œæˆ–è€…ç”¨æ›´å°çš„RAMæ¥ä»£æ›¿å¤§çš„RAMã€‚</li>
</ul>
<p><strong>é»˜è®¤æƒ…å†µä¸‹</strong>ï¼š</p>
<ul>
<li>é»˜è®¤æ˜¯å•ç«¯å£çš„RAMã€‚</li>
<li>å¦‚æœinitiation interval or latencyå¯ä»¥è¢«å‡å°‘ï¼Œåˆ™ä½¿ç”¨åŒç«¯å£çš„RAM</li>
</ul>
<h2 id="æ•°ç»„åˆå§‹åŒ–">æ•°ç»„åˆå§‹åŒ–</h2>
<ul>
<li>å»ºè®®ä½¿ç”¨<code>static</code>å…³é”®å­—æ¥å»ºç«‹æ•°ç»„ï¼Œä¿è¯HLSå°†å…¶å˜æˆå†…å­˜ã€‚</li>
<li>ç¡®ä¿åˆå§‹åŒ–å¤§å†…å­˜ä¸ä¼šé€ æˆæ“ä½œå¼€é”€ã€‚ä¸ç”¨staticä¼šåœ¨åˆå§‹åŒ–æ—¶å€™ï¼Œå†™å…¥è¿™äº›å€¼ï¼Œæœ‰ä¸€å®šæ—¶é—´å¼€é”€ã€‚</li>
</ul>
<h3 id="å®ä¾‹åŒ–ä¸€ä¸ªrom">å®ä¾‹åŒ–ä¸€ä¸ªROM</h3>
<ul>
<li>å»ºè®®ä½¿ç”¨<code>const</code>æ¥åšä¸€ä¸ªåªè¯»çš„ROMï¼Œå¦‚æœä¸åŠ ï¼Œä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚ç»¼åˆè¿‡ç¨‹è‡ªå·±ä¼šè¿›è¡Œä¼˜åŒ–ã€‚</li>
</ul>
<h1 id="æ•°æ®ç±»å‹">æ•°æ®ç±»å‹</h1>
<h2 id="cc-ç±»å‹">C/C++ ç±»å‹</h2>
<p>ç•¥</p>
<h2 id="arbitrary-precision-ap-data-types-ä»»æ„ç²¾åº¦æ•°æ®ç±»å‹">Arbitrary Precision (AP) Data Types ä»»æ„ç²¾åº¦æ•°æ®ç±»å‹</h2>
<ul>
<li><strong>Cè¯­è¨€å¯ä»¥è¿™æ ·å†™</strong></li>
</ul>
<pre><code class="language-C++">#include &quot;types.h&quot;

typedef int6 dinA_t;
typedef int12 dinB_t;
typedef int22 dinC_t;
typedef int33 dinD_t;
typedef int18 dout1_t;
typedef uint13 dout2_t;
typedef int22 dout3_t;
typedef int6 dout4_t;
</code></pre>
<ul>
<li><strong>C++æ¨¡ç‰ˆè¿™æ ·å†™</strong>ï¼Œè¿˜æœ‰ä¸€ä¸ªå¥½å¤„æ˜¯å¯ä»¥å®šä¹‰è¶…å¤§çš„æ•°</li>
</ul>
<pre><code class="language-C++">#include &quot;ap_int.h&quot;
void foo_top (â€¦) {
  
 ap_int&lt;9&gt;  var1;           // 9-bit
 ap_uint&lt;10&gt;  var2;         // 10-bit unsigned
</code></pre>
<h3 id="å®šç‚¹æ•°-arbitrary-precision-fixed-point-data-types">å®šç‚¹æ•° Arbitrary Precision Fixed-Point Data Types</h3>
<pre><code class="language-C++">#include &lt;ap_fixed.h&gt;
...
ap_fixed&lt;18,6,AP_RND &gt; my_type;
...
ap_fixed&lt;2, 0&gt; a = -0.5;    // a can be -0.5,
ap_ufixed&lt;1, 0&gt; x = 0.5;    // 1-bit representation. x can be 0 or 0.5
ap_ufixed&lt;1, -1&gt; y = 0.25;  // 1-bit representation. y can be 0 or 0.25
const ap_fixed&lt;1, -7&gt; z = 1.0/256;  // 1-bit representation for z = 2^-8
</code></pre>
<p>å››ä¸ªæ³›å‹å‚æ•°åˆ†åˆ«ä¸ºï¼Œè§<a href="https://www.xilinx.com/html_docs/xilinx2020_2/vitis_doc/use_arbitrary_precision_data_type.html#guo1585572335601">Fixed-Point Identifier Summary</a>ï¼š</p>
<ul>
<li>æ€»é•¿åº¦</li>
<li>æ•´æ•°ä½æ•°ï¼ˆå¯ä»¥ä¸ºè´Ÿæ•°ï¼Œè§ä¾‹å­ï¼‰</li>
<li>é‡åŒ–æ¨¡å¼</li>
<li>æº¢å‡ºé¥±å’Œä½æ•°é‡</li>
</ul>
<h2 id="å¤åˆæ•°æ®ç±»å‹">å¤åˆæ•°æ®ç±»å‹</h2>
<h3 id="struct"><code>struct</code></h3>
<ul>
<li>é»˜è®¤æˆå‘˜æ˜¯åˆ†è§£çš„ã€‚<strong>ç»“æ„ä½“çš„æ•°ç»„å®ç°ä¸ºå¤šä¸ªæ•°ç»„</strong>ï¼Œç»“æ„ä½“çš„æ¯ä¸ªæˆå‘˜éƒ½æœ‰ä¸€ä¸ªå•ç‹¬çš„æ•°ç»„ã€‚</li>
<li>åˆ©ç”¨pragmaæŒ‡ä»¤æ§åˆ¶æ˜¯å¦åˆ†è§£ã€‚</li>
</ul>
<h3 id="enum"><code>enum</code></h3>
<p>ç•¥</p>
<h3 id="unions"><code>unions</code></h3>
<ul>
<li>HLSç»¼åˆå¹¶ä¸ä¿è¯ä½¿ç”¨ç›¸åŒçš„å†…å­˜æˆ–è€…å¯„å­˜å™¨</li>
</ul>
<h3 id="ç±»å‹é™å®šç¬¦">ç±»å‹é™å®šç¬¦</h3>
<ul>
<li><code>volatile</code>ï¼š
<ul>
<li>ç»¼åˆä¸ä¼šè¿›è¡Œä¼˜åŒ–</li>
<li>Arbitrary precision types do not support the volatile qualifierï¼ˆè®¡ç®—æ—¶å€™ï¼‰</li>
</ul>
</li>
<li><code>static</code>ï¼š
<ul>
<li>RTLç­‰ä»·æ˜¯å¯„å­˜å™¨ã€è§¦å‘å™¨å’Œå†…å­˜ã€‚</li>
<li>config_rtl éœ€è¦é…ç½®ï¼Œä¸ç„¶é»˜è®¤å¤ä½ä¸ä¼šåˆå§‹åŒ–ã€‚</li>
</ul>
</li>
<li><code>const</code>ï¼š
<ul>
<li>å¸¸é‡æˆ–è€…ROM</li>
</ul>
</li>
</ul>
<h2 id="å…¨å±€å˜é‡">å…¨å±€å˜é‡</h2>
<p>è‡ªç”±ä½¿ç”¨ï¼Œä½†æ˜¯åªå­˜åœ¨è¯¥ipæ ¸å†…éƒ¨ã€‚</p>
<h2 id="æŒ‡é’ˆ">æŒ‡é’ˆ</h2>
<p>å¯ä»¥ç»¼åˆï¼Œä½†å°½é‡é¿å…ä½¿ç”¨ã€‚å°¤å…¶æ˜¯ä»¥ä¸‹æƒ…å†µï¼š</p>
<ul>
<li>åŒä¸€ä¸ªå‡½æ•°ä¸­ï¼Œä¸€ä¸ªæŒ‡é’ˆè¢«è¯»å†™å¤šæ¬¡</li>
<li>æŒ‡é’ˆç±»å‹è½¬æ¢ä»…é™C/C++æ ‡å‡†ç±»å‹</li>
</ul>
<h3 id="æ¥å£å¤„ä½¿ç”¨æŒ‡é’ˆtopå‡½æ•°çš„å‚æ•°ä¸­">æ¥å£å¤„ä½¿ç”¨æŒ‡é’ˆï¼ˆtopå‡½æ•°çš„å‚æ•°ä¸­ï¼‰</h3>
<ul>
<li>åŸºæœ¬æŒ‡é’ˆï¼š
<ul>
<li>æŒ‡é’ˆå¯ä»¥åˆæˆä¸ºä¸€ä¸ªç®€å•çš„<strong>çº¿æ¥å£</strong>æˆ–ä½¿ç”¨æ¡æ‰‹çš„æ¥å£åè®®ã€‚</li>
<li>è¦åˆæˆä¸€ä¸ªFIFOæ¥å£ï¼ŒæŒ‡é’ˆå¿…é¡»æ˜¯åªè¯»æˆ–åªå†™çš„ã€‚</li>
</ul>
</li>
<li>æŒ‡é’ˆè¿ç®—ï¼š
<ul>
<li>ä¸èƒ½å®ç°ï¼Œä¸èƒ½å®ç°æ— åºè®¿é—®ã€‚</li>
<li>éœ€è¦å˜æˆæ•°ç»„ï¼Œç”¨RAMå®ç°ã€‚</li>
</ul>
</li>
<li>æµæ•°æ®
<ul>
<li>C++ ç¼–è¯‘å™¨å¯èƒ½ä¼šä¼˜åŒ–æŒ‡é’ˆçš„è®¿é—®ï¼Œæ‰€ä»¥éœ€è¦åŠ volatileã€‚</li>
</ul>
</li>
</ul>
<pre><code class="language-C++">#include &quot;pointer_stream_good.h&quot;

void pointer_stream_good ( volatile dout_t *d_o,  volatile din_t *d_i) {
 din_t acc = 0;

 acc += *d_i;
 acc += *(d_i+1);
 *d_o = acc;
 acc += *(d_i+2);
 acc += *(d_i+3);
 *(d_o+1) = acc;
} 
</code></pre>
<h2 id="vectorç±»å‹">Vectorç±»å‹</h2>
<h3 id="hlsçš„vectorç±»å‹æ˜¯ä¸ºäº†simdæ“ä½œ">HLSçš„Vectorç±»å‹æ˜¯ä¸ºäº†SIMDæ“ä½œ</h3>
<ul>
<li>single-instruction multiple-data (SIMD)ï¼š å•æŒ‡ä»¤ï¼Œå¤šæ•°æ®ã€‚</li>
<li>Vitis HLSæä¾›çš„ä¸€ä¸ªæ¨¡ç‰ˆç±»å‹<code>hls::vector&lt;T, N&gt;</code>: ä¸€ä¸ªæœ‰Nä¸ªTç±»å‹çš„å…ƒç´ ï¼ŒTå¿…é¡»é‡è½½äº†æ•°å­¦è¿ç®—ã€‚</li>
<li>æœ€ä½³æ€§èƒ½æ˜¯åœ¨<strong>Tçš„ä½å®½</strong>å’Œ<strong>Nçš„å€¼</strong>å‡ä¸º2çš„å¹‚æ—¶ã€‚</li>
<li>åœ¨<code>hls::vector</code>ä¸Šçš„è¿ç®—æ“ä½œéƒ½ä¼šè¢«å¹¶è¡ŒåŒ–ï¼Œæ‰€ä»¥çŸ©é˜µè¿ç®—ä¸€èˆ¬ä½¿ç”¨è¿™ä¸ªã€‚</li>
</ul>
<pre><code class="language-C++">#include &lt;hls_vector.h&gt;
hls::vector&lt;T,N&gt;  aVec;
</code></pre>
<h3 id="vector-å†…å­˜å¸ƒå±€">Vector å†…å­˜å¸ƒå±€</h3>
<ul>
<li>Vctorå‚¨å­˜æ˜¯å¯¹é½åˆ°2çš„næ¬¡æ–¹çš„ã€‚æ‰€ä»¥æ€§èƒ½æœ€å¥½çš„æ—¶å€™æ˜¯å¤§å°å’Œä½å®½éƒ½ä¸º2çš„å¹‚çš„æ—¶å€™ã€‚</li>
<li>å®ç°æ–¹å¼å¦‚ä¸‹ï¼š</li>
</ul>
<pre><code class="language-C++">constexpr size_t gp2(size_t N)
{
    return (N &gt; 0 &amp;&amp; N % 2 == 0) ? 2 * gp2(N / 2) : 1;
}
 
template&lt;typename T, size_t N&gt; class alignas(gp2(sizeof(T) * N)) vector
{
    std::array&lt;T, N&gt; data;
};
</code></pre>
<h1 id="cç±»å’Œæ¨¡ç‰ˆ">C++ç±»å’Œæ¨¡ç‰ˆ</h1>
<ul>
<li>ç±»æ˜¯å®Œå…¨æ”¯æŒçš„ã€‚</li>
<li>ä¸å»ºè®®åœ¨ç±»ä¸­ä½¿ç”¨å…¨å±€å˜é‡ï¼Œä¼šé˜»ç¢ä¼˜åŒ–</li>
<li>æ¨¡ç‰ˆæ˜¯æ”¯æŒçš„ã€‚ä½†ä¸èƒ½ä½œä¸ºé¡¶å±‚å‡½æ•°ã€‚</li>
</ul>
<h1 id="æ–­è¨€">æ–­è¨€</h1>
<ul>
<li>æ–­è¨€å¯ä»¥ç”¨åœ¨ç»¼åˆä¸­ï¼Œæä¾›èŒƒå›´çš„ä¿¡æ¯ã€‚å¦‚å¾ªç¯ä¸Šé™ç­‰ã€‚ï¼ˆä¸åƒtripcount åªèƒ½ç”¨äºåˆ†æï¼‰</li>
</ul>
<h1 id="é«˜æ€§èƒ½hls">é«˜æ€§èƒ½HLS</h1>
<ul>
<li>æ˜¯æœ€å¤§ç¨‹åº¦åœ°å‡å°‘å¯¹é¡¶å±‚å‡½æ•°å‚æ•°çš„è®¿é—®ã€‚</li>
<li>åœ¨é˜µåˆ—ä¸­è®¾ç½®é»˜è®¤å€¼ä¼šèŠ±è´¹æ—¶é’Ÿå‘¨æœŸå’Œæ€§èƒ½ã€‚</li>
<li>å¤šæ¬¡è¯»å–å’Œé‡æ–°è¯»å–æ•°æ®ä¼šæ¶ˆè€—æ—¶é’Ÿå‘¨æœŸå’Œæ€§èƒ½ã€‚</li>
<li>ä»¥ä»»æ„æˆ–éšæœºè®¿é—®æ–¹å¼è®¿é—®æ•°æ®è¦æ±‚å°†æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°æ•°ç»„ä¸­ï¼Œæµªè´¹èµ„æºã€‚</li>
</ul>
<h2 id="ç¡®ä¿æ•°æ®çš„è¿ç»­æµå’Œæ•°æ®é‡ç”¨">ç¡®ä¿æ•°æ®çš„è¿ç»­æµå’Œæ•°æ®é‡ç”¨</h2>
<ul>
<li>å°†æ•°æ®ä»CPUæˆ–ç³»ç»Ÿå†…å­˜ä¼ è¾“åˆ°FPGAï¼Œåˆ™é€šå¸¸ä¼šä»¥<strong>æµä¼ è¾“æ–¹å¼</strong>è¿›è¡Œä¼ è¾“ã€‚ä»FPGAä¼ è¾“å›ç³»ç»Ÿçš„æ•°æ®ä¹Ÿåº”ä»¥è¿™ç§æ–¹å¼æ‰§è¡Œã€‚</li>
<li><code>hls::stream</code> , é¡ºåºè®¿é—®ï¼Œè¡¨ç°ä¸ºä¸€ä¸ªæ— é™æ·±åº¦çš„FIFOã€‚</li>
<li>åœ¨CPUä½“ç³»ç»“æ„ä¸­ï¼Œé€šå¸¸é¿å…æœ‰æ¡ä»¶æˆ–åˆ†æ”¯æ“ä½œã€‚å½“ç¨‹åºéœ€è¦åˆ†æ”¯æ—¶ï¼Œå®ƒå°†ä¸¢å¤±å­˜å‚¨åœ¨CPUæå–ç®¡çº¿ä¸­çš„æ‰€æœ‰æŒ‡ä»¤ã€‚<strong>åœ¨FPGAä½“ç³»ç»“æ„ä¸­ï¼Œæ¯ä¸ªæ¡ä»¶åˆ†æ”¯çš„ç¡¬ä»¶ä¸­å·²ç»å­˜åœ¨ä¸€æ¡å•ç‹¬çš„è·¯å¾„ï¼Œå¹¶ä¸”ä¸ä¼šä¸æµæ°´çº¿ä»»åŠ¡å†…éƒ¨çš„åˆ†æ”¯ç›¸å…³çš„æ€§èƒ½ä¸‹é™ã€‚è¿™åªæ˜¯é€‰æ‹©è¦ä½¿ç”¨å“ªä¸ªåˆ†æ”¯çš„ä¸€ç§æƒ…å†µã€‚</strong></li>
<li><a href="https://www.xilinx.com/html_docs/xilinx2020_2/vitis_doc/hls_pragmas.html">HLS Pragmas</a>çš„ä½¿ç”¨ã€‚</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Vitis HLS çš„Tiny Tutorialéƒ¨åˆ†ä»£ç åˆ†æ]]></title>
        <id>https://Busy-Bob.github.io/post/vitis-hls-de-tiny-tutorial-bu-fen-dai-ma-fen-xi/</id>
        <link href="https://Busy-Bob.github.io/post/vitis-hls-de-tiny-tutorial-bu-fen-dai-ma-fen-xi/">
        </link>
        <updated>2021-01-04T06:15:07.000Z</updated>
        <summary type="html"><![CDATA[<p>å¯¹ä¾‹å­ä¸­çš„è¯­æ³•ç­‰çš„ä¸€ç‚¹è®°å½•</p>
]]></summary>
        <content type="html"><![CDATA[<p>å¯¹ä¾‹å­ä¸­çš„è¯­æ³•ç­‰çš„ä¸€ç‚¹è®°å½•</p>
<!-- more -->
<h1 id="èƒŒæ™¯ä»‹ç»">èƒŒæ™¯ä»‹ç»</h1>
<ul>
<li><strong>HLS</strong> (high-level synthesis)ï¼š é«˜çº§ç»¼åˆ, ç”¨ C/C++ä¸ºFPGAå¼€å‘ RTL IP.</li>
<li><strong>Vitis HLS</strong>:  åœ¨Vivado 2020ç‰ˆæœ¬ä¸­æ›¿ä»£åŸå…ˆçš„Vivado HLS, åŠŸèƒ½ç•¥æœ‰å·®å¼‚ï¼Œåœ¨Vivado HLSä¸­çš„ä¾‹å­ç›´æ¥åœ¨Vitis HLSä¸Šè·‘ä¼šæŠ¥é”™ã€‚è¯¦ç»†æ¯”è¾ƒè§<a href="https://cloud.tencent.com/developer/article/1745199">Vivado HLSå’ŒVitis HLSä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li>
<li><strong>HLSä¸­çš„pragmaè¯­æ³•</strong>: <a href="https://www.xilinx.com/html_docs/xilinx2020_2/vitis_doc/hls_pragmas.html">HLS Pragmas</a></li>
</ul>
<h1 id="å†…å®¹">å†…å®¹</h1>
<ul>
<li><code>#pragma HLS dataflow</code>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼ŒVitis HLSå·¥å…·è¯•å›¾æœ€å°åŒ–å»¶è¿Ÿå¹¶æé«˜å¹¶å‘æ€§ã€‚ä½†æ˜¯ï¼Œæ•°æ®ä¾èµ–æ€§å¯èƒ½ä¼šé™åˆ¶è¿™ä¸€ç‚¹ã€‚DATAFLOWä¼˜åŒ–ä½¿<strong>å‡½æ•°æˆ–å¾ªç¯ä¸­çš„æ“ä½œèƒ½å¤Ÿåœ¨ä¸Šä¸€ä¸ªå‡½æ•°æˆ–å¾ªç¯å®Œæˆå…¶æ‰€æœ‰æ“ä½œä¹‹å‰å¼€å§‹æ“ä½œ</strong>ã€‚ï¼ˆèƒ½å¤Ÿåˆ†ææ›´ç»†ï¼‰ã€‚</li>
<li>ä¹Ÿèƒ½å¤Ÿè§£å†³ä¸¤ä¸ªä¸ä¾èµ–å¾ªç¯ä¸å¹¶è¡Œæƒ…å†µï¼ˆç±»ä¼¼äºå°è£…è¿›å‡½æ•°ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<pre><code class="language-C++">void diamond(data_t vecIn[N], data_t vecOut[N])
{
  data_t c1[N], c2[N], c3[N], c4[N];
#pragma HLS dataflow
  funcA(vecIn, c1, c2);
  funcB(c1, c3);
  funcC(c2, c4);
  funcD(c3, c4, vecOut);
}
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://Busy-Bob.github.io/post-images/1609835551513.png" alt="" loading="lazy"></figure>
<ul>
<li><code>#pragma HLS pipeline rewind</code>
<ul>
<li>æ„é€ ä¸€ä¸ªè¿ç»­å¾ªç¯çš„æµæ°´çº¿ã€‚ä¸¤æ¬¡å¾ªç¯ä¹‹é—´æ²¡æœ‰æš‚åœã€‚</li>
<li>ä¸èƒ½åŒ…å«æ¡ä»¶åˆ†æ”¯ (if-else)</li>
<li>åªæ”¯æŒå¾ªç¯ï¼Œä¸æ”¯æŒå‡½æ•°çš„æµæ°´çº¿åŒ–ã€‚</li>
</ul>
</li>
</ul>
<pre><code class="language-C++">  for (int i = 0; i &lt; N; i++)
  {
#pragma HLS pipeline rewind
#pragma HLS unroll factor = 2
    data_t t = in[i] * 3;
    out1[i] = t;
    out2[i] = t;
  }
</code></pre>
<ul>
<li><code>#pragma HLS unroll factor = 2</code>
<ul>
<li>å°†å¾ªç¯å±•å¼€å¤šå°‘æ¬¡</li>
</ul>
</li>
</ul>
<pre><code class="language-C++">for(int i = 0; i &lt; X; i++) {
  pragma HLS unroll factor=2
  a[i] = b[i] + c[i];
}
</code></pre>
<p>å˜æˆï¼š</p>
<pre><code class="language-C++">for(int i = 0; i &lt; X; i += 2) {
  a[i] = b[i] + c[i];
  if (i+1 &gt;= X) break;
  a[i+1] = b[i+1] + c[i+1];
}
</code></pre>
<ul>
<li><code>#pragma HLS function_instantiate variable=&lt;variable&gt;</code>
<ul>
<li>FUNCTION_INSTANTIATEç¼–è¯‘æŒ‡ç¤ºç”¨äºä¸ºå‡½æ•°çš„æ¯ä¸ªå®ä¾‹åˆ›å»ºå”¯ä¸€çš„RTLå®ç°ï¼Œä»è€Œå¯ä»¥æ ¹æ®å‡½æ•°è°ƒç”¨å¯¹æ¯ä¸ªå®ä¾‹è¿›è¡Œæœ¬åœ°ä¼˜åŒ–ã€‚å› ä¸ºï¼šè°ƒç”¨å‡½æ•°æ—¶ï¼Œ<strong>å‡½æ•°çš„æŸäº›è¾“å…¥å¯ä»¥æ˜¯æ’å®šå€¼</strong>ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥ç®€åŒ–å‘¨å›´çš„æ§åˆ¶ç»“æ„å¹¶<strong>ç”Ÿæˆæ›´å°çš„</strong>ï¼Œ<strong>æ›´ä¼˜åŒ–çš„åŠŸèƒ½å—</strong>ã€‚</li>
<li><code>variable</code>æ˜¯å¿…éœ€çš„å‚æ•°ï¼Œç”¨äºå®šä¹‰è¦ç”¨ä½œå¸¸é‡çš„å‡½æ•°å‚æ•°ã€‚</li>
</ul>
</li>
</ul>
<pre><code class="language-C++">char foo(char inval, char incr) {
#pragma HLS INLINE OFF
#pragma HLS FUNCTION_INSTANTIATE variable=incr
 return inval + incr;
}

void top(char inval1, char inval2, char inval3,
 char *outval1, char *outval2, char *outval3)
{
 *outval1 = foo(inval1,   0);
 *outval2 = foo(inval2,   1);
 *outval3 = foo(inval3, 100);
}
</code></pre>
<ul>
<li><strong>ä¸å®Œç¾çš„å¾ªç¯(imperfect loop)</strong>:
<ul>
<li>å†…å±‚å¾ªç¯ä¸Šé™æ˜¯ä¸€ä¸ªå˜é‡ã€‚</li>
<li>å¾ªç¯ä½“å¹¶éå…¨éƒ¨åœ¨æœ€é‡Œå±‚å¾ªç¯ä¸­ã€‚</li>
<li>æ‰€ä»¥<strong>æ²¡æ³•å±•å¼€</strong>ï¼Œä¼šé€ æˆé¢å¤–çš„è¿›å‡ºå¾ªç¯çš„æ—¶é’Ÿå‘¨æœŸã€‚</li>
</ul>
</li>
</ul>
<pre><code class="language-C++">    LOOP_I:for(i=0; i &lt; 20; i++){
        acc = 0;
        LOOP_J: for(j=0; j &lt; 20; j++){
            acc += A[j] * j;
        }
        if (i%2 == 0)
            B[i] = acc / 20;
        else
            B[i] = 0;
    }
</code></pre>
<ul>
<li>å°†ä¸å®Œç¾å¾ªç¯æ”¹å†™æˆå®Œç¾å¾ªç¯çš„trickï¼š<strong>ä½¿ç”¨æ¡ä»¶è¯­å¥</strong>ã€‚</li>
</ul>
<pre><code class="language-C++">    LOOP_I:for(i=0; i &lt; 20; i++){
        LOOP_J: for(j=0; j &lt; 20; j++){
            if(j==0) acc = 0;
            acc += A[j] * j;
            if(j==19) {
                if (i%2 == 0)
                    B[i] = acc / 20;
                else
                    B[i] = 0;
            }
        }
    }
</code></pre>
<ul>
<li>
<p>å¾ªç¯å¯ä»¥æ²¡æœ‰labelï¼ŒHLSä¼šç”Ÿæˆé»˜è®¤labelã€‚</p>
</li>
<li>
<p>å¾ªç¯ä¸Šé™ä¸ºå˜é‡çš„ä¼˜åŒ–æ–¹æ³•ï¼š <strong>ä½¿ç”¨æ¡ä»¶è¯­å¥</strong>ã€‚</p>
</li>
</ul>
<pre><code class="language-C++">  LOOP_X:for (x=0;x&lt;N-1; x++) {
    if (x&lt;width) {
      out_accum += A[x];
    }
  }
</code></pre>
<ul>
<li>å¯ä»¥åˆ©ç”¨ä¸¤ä¸ªç‹¬ç«‹çš„æ¨¡å—æ¥å‹ç¼©æµæ°´çš„II ï¼ˆç”¨æ¨¡ç‰ˆå®ç°è¾ƒä¸ºæ–¹ä¾¿ï¼Œéœ€è¦é…åˆä¸Šå¤šè·¯é€‰æ‹©å™¨ï¼‰</li>
</ul>
<pre><code class="language-C++">//                    +--proc--&gt;[ II=2 ]--+
//                   /                     \               
// in --&gt;[demux II=1]                       [mux II=1]---&gt; out
//                   \                     /
//                    +--proc--&gt;[ II=2 ]--+

#include &quot;example.h&quot;

//--------------------------------------------
template &lt;int ID&gt;
void proc(stream&lt;int&gt; &amp;in, stream&lt;int&gt; &amp;out)
{
    for (int i = 0; i &lt; 25; i++)
    {
#pragma HLS PIPELINE II=2
#pragma HLS LATENCY min=2 max=2
        int var;
        in.read(var);
        out.write(var);
    }
}

//--------------------------------------------
void mux(stream&lt;int&gt; (&amp;inter)[2], stream&lt;int&gt; &amp;mux_output)
{
    int mux_sel = 0;
    for (int i = 0; i &lt; 50; i++)
    {
#pragma HLS PIPELINE II=1
        int var;
        inter[mux_sel].read(var);
        mux_output.write(var);
        mux_sel = (mux_sel == 0) ? (1) : (0);
    }
}

//--------------------------------------------
void demux(stream&lt;int&gt; &amp;in, stream&lt;int&gt; (&amp;inter)[2])
{
    int demux_sel = 0;
    for (int i = 0; i &lt; 50; i++)
    {
#pragma HLS PIPELINE II=1

        int var;
        in.read(var);
        inter[demux_sel].write(var);
        demux_sel = (demux_sel == 0) ? 1 : 0;
    }
}

void example(stream&lt;int&gt; &amp;in, stream&lt;int&gt; &amp;out)
{
#pragma HLS DATAFLOW

    stream&lt;int&gt; inter[2];
    stream&lt;int&gt; mux_in[2];

#pragma HLS STREAM variable = inter depth = 16
#pragma HLS STREAM variable = mux_in depth = 16

    demux(in, inter);
    proc&lt;0&gt;(inter[0], mux_in[0]);
    proc&lt;1&gt;(inter[1], mux_in[1]);
    mux(mux_in, out);
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ğŸ‘¨ğŸ‘©ğŸ’äº”å‘¨å¹´å•¦~ğŸ¥‚ğŸ»]]></title>
        <id>https://Busy-Bob.github.io/post/wu-zhou-nian-la/</id>
        <link href="https://Busy-Bob.github.io/post/wu-zhou-nian-la/">
        </link>
        <updated>2021-01-02T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p><strong>2021-1-3ï¼š æ°´å‰å’Œè‡­è‡­äº”å‘¨å¹´å•¦ï¼</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609601219382.jpg" alt="" loading="lazy"></p>
]]></summary>
        <content type="html"><![CDATA[<p><strong>2021-1-3ï¼š æ°´å‰å’Œè‡­è‡­äº”å‘¨å¹´å•¦ï¼</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609601219382.jpg" alt="" loading="lazy"></p>
<!-- more -->
<h1 id="2020å¹´çš„ä¸€æœˆé‚£ä¹ˆè¿‘åˆé‚£ä¹ˆè¿œ">2020å¹´çš„ä¸€æœˆï¼Œé‚£ä¹ˆè¿‘åˆé‚£ä¹ˆè¿œ</h1>
<p>2020å¹´è·¨å¹´è¿™ä¸€å¤©ï¼Œä¹¡æ‘æ•™å¸ˆå‰è¿”å›åŒ—äº¬ï¼Œå’Œè¢«æ— æ•°è€ƒè¯•æ‘§æ®‹çš„è‡­ç¬¬ä¸€æ¬¡è·¨å¹´+å‚åŠ å­¦æ ¡çš„è·¨å¹´æ™šä¼š~</p>
<figure data-type="image" tabindex="1"><img src="https://Busy-Bob.github.io/post-images/1609590165354.jpg" alt="" loading="lazy"></figure>
<p><strong>æ–°æ–°å»¿å»¿</strong>çš„2020æ¥å•¦</p>
<figure data-type="image" tabindex="2"><img src="https://Busy-Bob.github.io/post-images/1609590219882.jpg" alt="" loading="lazy"></figure>
<p>é‚£æ—¶çš„æˆ‘ä»¬è¿˜ä¸çŸ¥é“2020ä¼šæ˜¯ä¸€å›¢ç³ŸğŸ™ŠğŸ™‰ğŸ™ˆ</p>
<br>
<p>å›æ–°æ´¥(æ°å¥½é”™è¿‡äº†é€”å¾„æ­¦æ±‰çš„ç«è½¦)ï¼Œä¸€èµ·å»çœ‹æœ›äº†æ°´å‰å¦ˆå¦ˆå®¶çš„å°æ³°è¿ª~ğŸ¶ğŸ¶ğŸ¶<br>
<img src="https://Busy-Bob.github.io/post-images/1609592085383.jpg" alt="" loading="lazy"></p>
<h1 id="äºŒæœˆä¸‰æœˆå®¶é‡Œè¹²">äºŒæœˆä¸‰æœˆå®¶é‡Œè¹²</h1>
<p>ä¸€æœˆæœ«ï¼Œç–«æƒ…å¼€å§‹ä¸¥é‡èµ·æ¥äº†ã€‚æˆ‘ä»¬å°±åªèƒ½éª‘ç€å°ç”µé©´åœ¨ä¸¤ä¸ªå®¶é—´ç©¿æ¢­ï¼Œä¸€ä¸‰äº”åœ¨è‡­è‡­å®¶ï¼ŒäºŒå››å…­åœ¨æ°´å‰å®¶ã€‚å°±è¿™æ ·å¼€å¼€å¿ƒå¿ƒåœ°åº¦è¿‡äº†ä¸¤ä¸ªæœˆ~(ç›‘ç®¡æœ€ä¸¥æ ¼çš„æ—¶å€™ç”šè‡³åªèƒ½åœ¨è¶…å¸‚ç¢°å¤´....)</p>
<p>æƒ…äººèŠ‚çš„ç¤¼ç‰©æ˜¯å±±åœ°ç«ç‘°ï¼<br>
<img src="https://Busy-Bob.github.io/post-images/1609591290870.jpg" alt="" loading="lazy"></p>
<p>è¿˜æœ‰å°ç›¸æœº~ è¿™æ ·åè®°æ€§çš„æ°´å‰å°±èƒ½å¤Ÿè®°å½•ä¸‹æ›´å¤šåœ¨ä¸€èµ·çš„ç¾å¥½å›å¿†å•¦~<br>
<img src="https://Busy-Bob.github.io/post-images/1609592821850.jpg" alt="" loading="lazy"></p>
<p>å½“ç„¶è¿˜æœ‰ï¼š</p>
<ul>
<li><strong>åœ¨å®¶é‡Œä¸€èµ·åƒç«é”…</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609593178211.jpg" alt="" loading="lazy"><br>
<br></li>
<li><strong>ä¸€èµ·ç©¿ç¡è¡£ä¸€èµ·åˆ·å‰§ä¸€èµ·æ¯”å¿ƒ</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609593229660.jpg" alt="" loading="lazy"><br>
<br></li>
<li><strong>ä¸€èµ·æ³¡jio</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609593307478.jpg" alt="" loading="lazy"><br>
<br></li>
<li><strong>ä¸€èµ·å°¬èˆï¼Œç¬¬ä¸€æ¬¡ä¹Ÿæ˜¯å”¯ä¸€çš„ä¸€æ¬¡ä¸¤ä¸ªäººåŒæ—¶MEGASTAR</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609594381621.jpg" alt="" loading="lazy"><br>
<br></li>
<li><strong>ä¸€èµ·ç©è€</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609593946953.jpg" alt="" loading="lazy"><br>
<br></li>
<li><strong>ä¸€èµ·åšé¥­</strong><br>
éƒ½è¢«åƒæ‰äº†ï¼Œæ²¡æœ‰å›¾äº†ğŸ˜‚<br>
<br></li>
</ul>
<h1 id="å››æœˆäº”æœˆæ·±åœ³happy">å››æœˆäº”æœˆæ·±åœ³happy</h1>
<p>å››æœˆäº”æœˆï¼Œæ°´å‰çš„å“¥å“¥è®©æ°´å‰å»æ·±åœ³å¸®å¿™ï¼Œæˆ‘ä¹Ÿä¸€å¹¶å»è¹­åƒè¹­å–:)ğŸğŸ–ğŸ—ğŸ¤ğŸ¨ğŸ¡ğŸœ</p>
<ul>
<li><strong>åƒ</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609595003396.jpg" alt="" loading="lazy"><br>
<br></li>
<li><strong>åƒ</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609595010299.jpg" alt="" loading="lazy"><br>
<br></li>
<li><strong>åšé¥­ï¼Œç„¶ååƒ</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609595046890.jpg" alt="" loading="lazy"><br>
<br></li>
<li><strong>å†åšé¥­ï¼Œç„¶ååƒ</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609595058832.jpg" alt="" loading="lazy"><br>
<br></li>
<li><strong>æœ€ååœ¨åŠå…¬å®¤æ’æ»¡äº†æ°´å‰å–œæ¬¢çš„èŠ±èŠ±~</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609595105586.jpg" alt="" loading="lazy"><br>
<br></li>
</ul>
<h1 id="å…­æœˆä¸ƒæœˆæ˜¯åˆ†å¼€çš„ä¸¤ä¸ªæœˆ">å…­æœˆä¸ƒæœˆæ˜¯åˆ†å¼€çš„ä¸¤ä¸ªæœˆ</h1>
<p>ç–«æƒ…æ§åˆ¶ä½äº†ï¼Œä¹¡æ‘å¥³æ•™å¸ˆå‰å‰æ°´ç»“æŸäº†ç½‘ä¸Šä¸Šè¯¾ï¼Œåˆå›åˆ°äº†å±±è¥¿ï¼Œæˆä¸ºäº†è½æ°´æ²³æœ€å¼ºçš„åœ°ç†è€å¸ˆï¼</p>
<ul>
<li><strong>å”¯ä¸€çš„çº¦ä¼šåœ°ç‚¹æ˜¯å¬å”¤å¸ˆå³¡è°·</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609595665922.jpg" alt="" loading="lazy"><br>
<br></li>
<li><strong>æ°´å‰ç»™å®¶é‡Œä¹°äº†ä¸€å †è‚‰è‚‰~</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609595729442.jpg" alt="" loading="lazy"><br>
<br></li>
</ul>
<h1 id="å…«æœˆ-è€å¸æœºå˜Ÿå˜Ÿå˜Ÿ">å…«æœˆ è€å¸æœºå˜Ÿå˜Ÿå˜Ÿ</h1>
<p>æ°´å‰å›æ¥å•¦ï¼æˆ‘ä»¬ä¹Ÿå¼€å§‹å­¦è½¦è½¦ï¼ç§‘ä¸€æˆ‘ä»¬éƒ½è€ƒäº†ä¸€æ ·çš„åˆ†æ•°~</p>
<ul>
<li><strong>å˜Ÿå˜Ÿå˜Ÿï¼Œå¼€è½¦å•¦</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609595988555.jpg" alt="" loading="lazy"><br>
<br></li>
<li><strong>ä¹Ÿå»äº†å¹¿å®‰çš„çŒ«çŒ«å’–å•¡å…ï¼Œä¸è¿‡è¿˜æœ‰äººæŠ½çƒŸ....</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609596042550.jpg" alt="" loading="lazy"><br>
<br></li>
</ul>
<h1 id="ä¹æœˆ-è¿”æ ¡åƒåƒåƒ">ä¹æœˆ è¿”æ ¡åƒåƒåƒ</h1>
<p>å…«æœˆæœ«ç»ˆäºå¯ä»¥è¿”æ ¡äº†ï¼Œæ°´å‰çˆ¸çˆ¸å»è¥¿è—ç©å•¦ï¼Œå¯æ€œå‰åªå¥½ä½åœ¨æˆ‘å®¶ã€‚ç™½å¤©å­¦è½¦åšé¥­ï¼Œæ™šä¸Šå’Œå¦ˆå¦ˆä¸€èµ·åˆ·å‰§ï¼Œæœ€åæƒŠé™©é€šè¿‡ç§‘äºŒï¼Œ è€Œæˆ‘åœ¨å­¦æ ¡åƒåƒåƒåƒåƒåƒåƒğŸ¤¤ğŸ¤¤ğŸ¤¤</p>
<ul>
<li>
<p><strong>åŠå¹´å¤šæ²¡æœ‰æµ‡æ°´çš„è‚‰è‚‰ä»¬</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609596722960.jpg" alt="" loading="lazy"><br>
æ°´å‰é€çš„è‚‰è‚‰ä»¬ç«Ÿç„¶åŸºæœ¬è¿˜æ˜¯å¥½å¥½çš„ï¼Œé™¤äº†å®éªŒå®¤çš„é‚£ä¸ªå°ä¸ªå­é¡¶ä¸ä½äº†~<br>
<img src="https://Busy-Bob.github.io/post-images/1609596772512.jpg" alt="" loading="lazy"><br>
<br></p>
</li>
<li>
<p><strong>å’Œå®¤å‹è¿”æ ¡ç¬¬ä¸€é¤</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609596564140.jpg" alt="" loading="lazy"><br>
<br></p>
</li>
<li>
<p><strong>è¿”æ ¡åå’Œå¤§å®¶åƒåƒåƒ</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609596800689.jpg" alt="" loading="lazy"><br>
<img src="https://Busy-Bob.github.io/post-images/1609596808591.jpg" alt="" loading="lazy"><br>
<img src="https://Busy-Bob.github.io/post-images/1609596818858.jpg" alt="" loading="lazy"><br>
<br></p>
</li>
<li>
<p><strong>æ°´å‰å›æ¥å•¦ï¼Œå»æ°´å‰æœ€å–œæ¬¢çš„é‡å…«~</strong><br>
<img src="https://Busy-Bob.github.io/post-images/1609596866823.jpg" alt="" loading="lazy"><br>
<br></p>
</li>
</ul>
<h1 id="åæœˆ-å‡ºæ¸¸-ç”Ÿæ—¥å’Œæ¡Œæ¸¸">åæœˆ å‡ºæ¸¸ã€ç”Ÿæ—¥å’Œæ¡Œæ¸¸</h1>
<p>æ¯å¹´åæœˆï¼Œéƒ½æ˜¯å¤©é«˜æ°”çˆ½çš„å¥½æ—¥å­ï¼Œéå¸¸é€‚åˆå‡ºå»ç©ã€‚</p>
<ul>
<li>
<p><strong>å†çˆ¬èŸ’å±±<s>å¤§çˆ·</s>å°å¼Ÿ</strong><br>
ä»Šå¤©çš„åä¸€åˆå»äº†èŸ’å±±ï¼ŒèŸ’å±±å¤§çˆ·ä¼¼ä¹ä»Šå¹´æ ¼å¤–çš„çŸ®å°ï¼Œä¸€ä¼šå°±ç™»é¡¶å•¦ï¼<br>
<img src="https://Busy-Bob.github.io/post-images/1609597594730.jpg" alt="" loading="lazy"><br>
<br></p>
</li>
<li>
<p><strong>å»é‡é¸­æ¹–ï¼</strong><br>
æ‹…ä»»å°å­¦æœŸåŠ©æ•™çš„æ„å¤–ä¹‹å–œï¼Œç§‹å¤©çš„é‡é¸­æ¹–çœŸçš„å¥½æ¼‚äº®~<br>
<img src="https://Busy-Bob.github.io/post-images/1609597706914.jpg" alt="" loading="lazy"><br>
<br><br>
<img src="https://Busy-Bob.github.io/post-images/1609597713248.jpg" alt="" loading="lazy"><br>
<br><br>
<img src="https://Busy-Bob.github.io/post-images/1609597735946.jpg" alt="" loading="lazy"><br>
<br></p>
</li>
<li>
<p><strong>è‡­è‡­çš„ç”Ÿæ—¥</strong><br>
è¿™ä¸€å¤©ï¼Œæ°´å‰å› ä¸ºæœ‰ç¯®çƒæ¯”èµ›æ—©æ—©ç¦»å¼€å•¦~å’Œå¤§ä¸ºã€sffåœ¨å®¿èˆå¿«ä¹åš¯å¥¶èŒ¶ï¼Œå¼€å¿ƒå¡å¡é¢‚ï¼<br>
<img src="https://Busy-Bob.github.io/post-images/1609597802417.jpg" alt="" loading="lazy"><br>
<br></p>
</li>
<li>
<p><strong>æå‰é€ç»™æ°´å‰çš„ç”Ÿæ—¥ç¤¼ç‰©</strong><br>
ä»Šå¹´é€ç»™æ°´å‰çš„ç¤¼ç‰©æ˜¯ä¸€ä¸ªèƒ½å¤Ÿæ”¾è¿›ä¹¦åŒ…çš„itxä¸»æœº~è€å¤«è€å¦»äº†ï¼Œæ—©é€æ—©äº«å—ğŸ’»ä»æ­¤æ°´å‰çš„0-12å¿«ä¹æè«å†ä¹Ÿä¸èƒ½æ‰¾ç”µè„‘å¡çš„ç†ç”±äº†hhhhhhhhh<br>
<img src="https://Busy-Bob.github.io/post-images/1609597946418.jpg" alt="" loading="lazy"><br>
<br></p>
</li>
<li>
<p><strong>æ¡Œæ¸¸ã€æ¡Œæ¸¸ï¼</strong><br>
ä»Šå¹´æ˜¯æ°´å‰çˆ±ç©çš„ä¸€å¹´ï¼Œä»å¡å°”è¾¾åˆ°å¡å¡é¢‚ã€å¡å¦å²›ï¼Œæ°´å‰ç©ä¸ªä¸åœï¼<br>
<img src="https://Busy-Bob.github.io/post-images/1609598264941.jpg" alt="" loading="lazy"><br>
ï¼ˆè¢«è¿«åŠ å…¥æ¸¸æˆçš„æˆ‘ï¼‰<br>
<br></p>
</li>
</ul>
<h1 id="åä¸€-åäºŒæœˆ-åƒåƒåƒå’Œæ°´å‰çš„ç”Ÿæ—¥">åä¸€ã€åäºŒæœˆ åƒåƒåƒå’Œæ°´å‰çš„ç”Ÿæ—¥</h1>
<p>ä»Šå¹´çš„å†¬å¤©æ ¼å¤–çš„å†·ï¼Œæ‰€ä»¥æ¶®è‚‰è¦åƒèµ·æ¥å•Šï¼</p>
<ul>
<li>
<p><strong>å¬è¯´ï¼Œåˆé›ªå’Œæ¶®è‚‰æ›´é…å“¦</strong><br>
åˆé›ªï¼Œæˆ‘ä»¬å»äº†å››é“å£æœ€å¥½åƒçš„æ¶®è‚‰ï¼Œæ’é˜Ÿåˆ°äº†ä¸‹åˆä¸¤ç‚¹.....<br>
<img src="https://Busy-Bob.github.io/post-images/1609598677322.jpg" alt="" loading="lazy"><br>
<br></p>
</li>
<li>
<p><strong>ç¹å¿™çš„åäºŒæœˆï¼Œæˆ‘ä»¬ç»ˆäºåœ¨äº”é“å£æ‰¾äº†ä¸€å®¶å’–å•¡å…</strong><br>
ä»Šå¹´å› ä¸ºæ ¡å›­å°é—­ï¼Œä¸èƒ½å†åˆ°æ ¡å›­é‡Œé¢æ¥å­¦ä¹ äº†ï¼Œç»è¿‡å‡ ç•ªè¾—è½¬ï¼Œç»ˆäºåœ¨äº”é“å£æ‰¾åˆ°äº†æ–°çš„è½è„šä¹‹åœ°ï¼Œåˆå¯ä»¥ä¸€èµ·å­¦ä¹ äº†ã€‚<br>
<img src="https://Busy-Bob.github.io/post-images/1609598757515.jpg" alt="" loading="lazy"><br>
<br></p>
</li>
<li>
<p><strong>åœ£è¯â€”â€”æ°´å‰çš„ç”Ÿæ—¥</strong><br>
å’Œæ°´å‰ä»¥åŠæ°´å‰çš„å®¤å‹ä»¬ä¸€èµ·åƒé¥­å”±Kï¼Œæ²¡é”™æˆ‘å°±æ˜¯Kæ­Œä¹‹ç‹<sub>(çš„è€å…¬)</sub>ã€‚<br>
<img src="https://Busy-Bob.github.io/post-images/1609600194043.jpg" alt="" loading="lazy"><br>
<br></p>
</li>
<li>
<p><strong>å†æ¬¡å°æ ¡å‰çš„æœ€åä¸€æ¬¡è§é¢</strong><br>
å­¦æ ¡åˆè¦å°é—­äº†ï¼Œèµ¶åœ¨æœ€åä¸€å¤©å’Œæ°´å‰è§äº†ä¸€é¢ï¼Œè¿˜åƒäº†å°å®‡å“¥æ¨èçš„å¥½åƒä¸²ä¸²ï¼ï¼ˆå½“å¤©å› ä¸ºå¯’å†·å˜æˆèƒ†å°è‡çš„æˆ‘â†“ï¼‰<br>
<img src="https://Busy-Bob.github.io/post-images/1609600950737.jpg" alt="" loading="lazy"></p>
</li>
</ul>
<h1 id="2021">2021ğŸ’‘ğŸ’</h1>
<p>æ–°çš„ä¸€å¹´ï¼Œ2021ğŸ›ğŸ›ğŸ›å•Šï¼</p>
<p>å¥½åƒæ²¡å•¥å¥½è¯´çš„äº†ï¼Œé‚£ <strong>æœ€åç¥å¤§å®¶èº«ä½“å¥åº·!!ç§‘ç ”æœ‰æˆ!!</strong></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[FPGAç”¨æ¥åŠ é€Ÿè¿ç®—çš„è°ƒç ”]]></title>
        <id>https://Busy-Bob.github.io/post/fpga-yong-lai-jia-su-yun-suan-de-diao-yan/</id>
        <link href="https://Busy-Bob.github.io/post/fpga-yong-lai-jia-su-yun-suan-de-diao-yan/">
        </link>
        <updated>2021-01-02T05:53:42.000Z</updated>
        <summary type="html"><![CDATA[<p>FPGAç”¨æ¥åŠ é€Ÿè¿ç®—çš„è°ƒç ”.ğŸ˜</p>
]]></summary>
        <content type="html"><![CDATA[<p>FPGAç”¨æ¥åŠ é€Ÿè¿ç®—çš„è°ƒç ”.ğŸ˜</p>
<!-- more -->
<h2 id=""><a href="https://www.zhihu.com/question/280468724/answer/517329473"><strong>FPGAç®—æ³•åŠ é€Ÿæœ‰ä»€ä¹ˆä¸€èˆ¬çš„å¥—è·¯ï¼Ÿ - Dorus TANçš„å›ç­” - çŸ¥ä¹</strong></a></h2>
<ol>
<li>å¹¶è¡Œè®¡ç®—ï¼Œæ¯”å¦‚æ¯ä¸ªæ­¥éª¤æ²¡æœ‰å…³è¿æ€§çš„å¾ªç¯æ“ä½œï¼›</li>
<li>ç®—æ³•æ­¥éª¤çš„å›ºå®šç¨‹åº¦ï¼Œé€šå¸¸è¶Šå›ºå®šçš„ç®—æ³•è¶Šé€‚åˆç”¨æµæ°´çº¿å®ç°ï¼Œè™½ç„¶ç»“æœå»¶è¿Ÿå·®ä¸å¤šï¼Œä½†æ˜¯æµæ°´ç»“æ„çš„ååé‡éå¸¸å¤§ï¼›</li>
<li>ä¹˜æ³•è¿ç®—ï¼ŒFPGAçš„ä¹˜æ³•è¿ç®—é€šå¸¸ç”¨ä¹˜æ³•å™¨åªéœ€è¦ä¸€ä¸ªå‘¨æœŸï¼›</li>
<li>ä¸€äº›ç‰¹å®šçš„çŸ©é˜µè¿ç®—ã€‚</li>
</ol>
<h2 id="-2"><a href="https://www.zhihu.com/question/24174597/answer/138717507"><strong>å¦‚ä½•è¯„ä»·å¾®è½¯åœ¨æ•°æ®ä¸­å¿ƒä½¿ç”¨ FPGA ä»£æ›¿ä¼ ç»Ÿ CPU çš„åšæ³•ï¼Ÿ - æåšæ°çš„å›ç­” - çŸ¥ä¹</strong></a></h2>
<ul>
<li>
<p>FPGA ä¸ºä»€ä¹ˆå¿«ï¼Ÿã€Œéƒ½æ˜¯åŒè¡Œè¡¬æ‰˜å¾—å¥½ã€ã€‚<strong>CPUã€GPU éƒ½å±äºå†¯Â·è¯ºä¾æ›¼ç»“æ„ï¼ŒæŒ‡ä»¤è¯‘ç æ‰§è¡Œã€å…±äº«å†…å­˜</strong>ï¼ŒFPGA ä¹‹æ‰€ä»¥æ¯” CPU ç”šè‡³ GPU èƒ½æ•ˆé«˜ï¼Œæœ¬è´¨ä¸Šæ˜¯æ— æŒ‡ä»¤ã€æ— éœ€å…±äº«å†…å­˜çš„ä½“ç³»ç»“æ„å¸¦æ¥çš„ç¦åˆ©ã€‚</p>
</li>
<li>
<p>FPGA æ¯ä¸ªé€»è¾‘å•å…ƒçš„åŠŸèƒ½åœ¨é‡ç¼–ç¨‹ï¼ˆçƒ§å†™ï¼‰æ—¶å°±å·²ç»ç¡®å®šï¼Œ<strong>ä¸éœ€è¦æŒ‡ä»¤</strong>ã€‚</p>
</li>
<li>
<p><strong>è®¡ç®—å¯†é›†å‹ä»»åŠ¡</strong>(åŒ…æ‹¬çŸ©é˜µè¿ç®—ã€å›¾åƒå¤„ç†ã€æœºå™¨å­¦ä¹ ã€å‹ç¼©ã€éå¯¹ç§°åŠ å¯†ã€Bing æœç´¢çš„æ’åºç­‰)</p>
<ul>
<li>Stratix V FPGA çš„æ•´æ•°ä¹˜æ³•è¿ç®—æ€§èƒ½ä¸ 20 æ ¸çš„ CPU åŸºæœ¬ç›¸å½“</li>
<li>æµ®ç‚¹ä¹˜æ³•è¿ç®—æ€§èƒ½ä¸ 8 æ ¸çš„ CPU åŸºæœ¬ç›¸å½“ï¼Œè€Œæ¯” GPU ä½ä¸€ä¸ªæ•°é‡çº§ã€‚</li>
<li>åœ¨æ•°æ®ä¸­å¿ƒï¼ŒFPGA ç›¸æ¯” GPU çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äº<strong>å»¶è¿Ÿ</strong>ã€‚</li>
<li>FPGA åŒæ—¶æ‹¥æœ‰<strong>æµæ°´çº¿å¹¶è¡Œå’Œæ•°æ®å¹¶è¡Œ</strong>ï¼Œè€Œ GPU å‡ ä¹åªæœ‰æ•°æ®å¹¶è¡Œï¼ˆæµæ°´çº¿æ·±åº¦å—é™ï¼‰ã€‚</li>
<li>æ•°æ®ä¸­å¿ƒçš„è®¡ç®—ä»»åŠ¡æ˜¯<strong>çµæ´»å¤šå˜</strong>çš„ï¼Œè€Œ ASIC ç ”å‘æˆæœ¬é«˜ã€å‘¨æœŸé•¿ã€‚å¥½ä¸å®¹æ˜“å¤§è§„æ¨¡éƒ¨ç½²äº†ä¸€æ‰¹æŸç§ç¥ç»ç½‘ç»œçš„åŠ é€Ÿå¡ï¼Œç»“æœå¦ä¸€ç§ç¥ç»ç½‘ç»œæ›´ç«äº†ï¼Œé’±å°±ç™½è´¹äº†ã€‚FPGA åªéœ€è¦å‡ ç™¾æ¯«ç§’å°±å¯ä»¥æ›´æ–°é€»è¾‘åŠŸèƒ½ã€‚FPGA çš„çµæ´»æ€§å¯ä»¥ä¿æŠ¤æŠ•èµ„</li>
</ul>
</li>
<li>
<p><strong>é€šä¿¡å¯†é›†å‹ä»»åŠ¡</strong></p>
<ul>
<li>ä»ååé‡ä¸Šè®²ï¼ŒFPGA ä¸Šçš„æ”¶å‘å™¨å¯ä»¥ç›´æ¥æ¥ä¸Š 40 Gbps ç”šè‡³ 100 Gbps çš„ç½‘çº¿ï¼Œä»¥çº¿é€Ÿå¤„ç†ä»»æ„å¤§å°çš„æ•°æ®åŒ…ã€‚</li>
<li>ç½‘å¡æŠŠæ•°æ®åŒ…æ”¶åˆ° CPUï¼ŒCPU å†å‘ç»™ç½‘å¡ï¼Œå³ä½¿ä½¿ç”¨ DPDK è¿™æ ·é«˜æ€§èƒ½çš„æ•°æ®åŒ…å¤„ç†æ¡†æ¶ï¼Œå»¶è¿Ÿä¹Ÿæœ‰ 4~5 å¾®ç§’ã€‚</li>
</ul>
</li>
<li>
<p>åªè¦è§„æ¨¡è¶³å¤Ÿå¤§ï¼Œå¯¹ FPGA ä»·æ ¼è¿‡é«˜çš„æ‹…å¿ƒå°†æ˜¯ä¸å¿…è¦çš„ã€‚</p>
</li>
<li>
<p>å¯¹å¾ˆå¤šç±»å‹çš„åº”ç”¨ï¼Œéšç€åˆ†å¸ƒå¼ FPGA åŠ é€Ÿå™¨çš„è§„æ¨¡æ‰©å¤§ï¼Œå…¶æ€§èƒ½æå‡æ˜¯è¶…çº¿æ€§çš„ã€‚</p>
</li>
<li>
<p>æŠŠä»»åŠ¡æ‹†åˆ†åˆ°åˆ†å¸ƒå¼ FPGA é›†ç¾¤çš„å…³é”®åœ¨äºå¹³è¡¡è®¡ç®—å’Œé€šä¿¡ã€‚</p>
</li>
<li>
<p>æ¯åšä¸€ç‚¹ä¸åŒçš„äº‹æƒ…ï¼Œå°±è¦å ç”¨ä¸€å®šçš„ FPGA é€»è¾‘èµ„æºã€‚<strong>å¦‚æœè¦åšçš„äº‹æƒ…å¤æ‚ã€é‡å¤æ€§ä¸å¼ºï¼Œå°±ä¼šå ç”¨å¤§é‡çš„é€»è¾‘èµ„æºï¼Œå…¶ä¸­çš„å¤§éƒ¨åˆ†å¤„äºé—²ç½®çŠ¶æ€</strong>ã€‚è¿™æ—¶å°±ä¸å¦‚ç”¨å†¯Â·è¯ºä¾æ›¼ç»“æ„çš„å¤„ç†å™¨ã€‚</p>
</li>
<li>
<p>FPGA å’Œ CPU ååŒå·¥ä½œï¼Œ<strong>å±€éƒ¨æ€§å’Œé‡å¤æ€§å¼ºçš„å½’ FPGAï¼Œå¤æ‚çš„å½’ CPU</strong>ã€‚</p>
</li>
</ul>
<h2 id="-3"><a href="https://china.xilinx.com/support/documentation/white_papers/c_wp491-floating-to-fixed-point.pdf"><strong>å°†æµ®ç‚¹è½¬ä¸ºå®šç‚¹å¤§å¹…é™ä½åŠŸè€—å’Œæˆæœ¬ - Xilinx</strong></a></h2>
<ul>
<li>ç”¨å®šç‚¹å®ç°çš„è®¾è®¡æ€»æ˜¯æ¯”ç”¨æµ®ç‚¹å®ç°çš„åŒä¸€è®¾è®¡æ›´åŠ é«˜æ•ˆï¼Œå› ä¸ºå®šç‚¹å®ç°æ–¹æ¡ˆæ‰€å ç”¨çš„èµ„æºå’Œæ¶ˆè€—çš„åŠŸè€—æ›´å°‘ã€‚è‹¥å°†è®¾è®¡è¿ç§»åˆ°å®šç‚¹ï¼ŒåŠŸè€—å’Œå ç”¨é¢ç§¯ç¼©å‡ä¸€åŠå¹¶ä¸ç¨€å¥‡ã€‚</li>
<li>å¯¹äºé‡‡ç”¨ C/C++ è¯­è¨€è®¾è®¡çš„å®¢æˆ·ï¼Œèµ›çµæ€æä¾› Vivado HLS å¹¶æ”¯æŒä»»æ„ç²¾åº¦å®šç‚¹æ•°æ®ç±»å‹ï¼Œä½¿å®¢æˆ·èƒ½å¤Ÿæ–¹ä¾¿åœ°é‡‡ç”¨å®šç‚¹è¿›è¡Œè®¾è®¡æˆ–è€…å°†ç°æœ‰çš„ C/C++ è®¾è®¡è½¬æ¢æˆå®šç‚¹ã€‚</li>
<li><strong>æµ®ç‚¹è½¬æ¢ä¸ºå®šç‚¹çš„ä¼˜åŠ¿</strong>:
<ul>
<li>å‡å°‘ FPGA èµ„æºå ç”¨ï¼ˆæ‰€éœ€çš„ DSP48E2ã€æŸ¥æ‰¾è¡¨ (LUT) å’Œè§¦å‘å™¨æ›´å°‘ï¼Œå­˜å‚¨å®šç‚¹æ•°å­—æ‰€éœ€çš„å­˜å‚¨å®¹é‡æ›´å°ï¼‰</li>
<li>åŠŸè€—æ›´ä½</li>
<li>ææ–™æˆæœ¬é™ä½</li>
<li>é™ä½æ—¶å»¶</li>
<li>ç›¸è¿‘çš„æ€§èƒ½å’Œç²¾åº¦</li>
</ul>
</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[The Zynq Book å­¦ä¹ ï¼š å¼•è¨€]]></title>
        <id>https://Busy-Bob.github.io/post/the-zynq-book-xue-xi/</id>
        <link href="https://Busy-Bob.github.io/post/the-zynq-book-xue-xi/">
        </link>
        <updated>2020-12-31T07:25:06.000Z</updated>
        <summary type="html"><![CDATA[<p>å­¦ä¹ The Zynq Bookç¬¬ä¸€ç« æ—¶çš„ä¸€äº›ç¬”è®°</p>
]]></summary>
        <content type="html"><![CDATA[<p>å­¦ä¹ The Zynq Bookç¬¬ä¸€ç« æ—¶çš„ä¸€äº›ç¬”è®°</p>
<!-- more -->
<ul>
<li>
<p>Zynq çš„æœ¬è´¨ç‰¹å¾ï¼Œæ˜¯å®ƒç»„åˆäº†ä¸€ä¸ªåŒæ ¸ARM Cortex-A9 <strong>å¤„ç†å™¨</strong>å’Œä¸€ä¸ªä¼ ç»Ÿçš„ç°åœºå¯ç¼–ç¨‹é—¨é˜µåˆ—ï¼ˆField Programmable Gate Arrayï¼Œ<strong>FPGA</strong>ï¼‰é€»è¾‘éƒ¨ä»¶ã€‚</p>
</li>
<li>
<p>è¿™ä¸ªæ¶æ„å®ç°äº†å·¥ä¸šæ ‡å‡†çš„AXI æ¥å£ï¼Œåœ¨èŠ¯ç‰‡çš„ä¸¤ä¸ªéƒ¨åˆ†ä¹‹é—´å®ç°äº†<strong>é«˜å¸¦å®½ã€ä½å»¶è¿Ÿ</strong>çš„è¿æ¥ã€‚</p>
</li>
<li>
<p>è¿™æ„å‘³ç€å¤„ç†å™¨å’Œé€»è¾‘éƒ¨åˆ†å„è‡ªéƒ½å¯ä»¥å‘æŒ¥æœ€ä½³çš„ç”¨é€”ï¼Œè€Œ<strong>ä¸ä¼šæœ‰</strong>åœ¨ä¸¤ä¸ªåˆ†ç«‹çš„èŠ¯ç‰‡ä¹‹é—´çš„é‚£ç§<strong>æ¥å£å¼€é”€</strong>ã€‚åŒæ—¶åˆèƒ½è·å¾—ç³»ç»Ÿè¢«ç®€åŒ–ä¸ºå•ä¸€èŠ¯ç‰‡æ‰€å¸¦æ¥çš„å¥½å¤„ï¼ŒåŒ…æ‹¬<strong>ç‰©ç†å°ºå¯¸</strong>å’Œæ•´ä½“<strong>æˆæœ¬çš„é™ä½</strong>ã€‚</p>
</li>
<li>
<p><strong>ä»€ä¹ˆæ˜¯ç‰‡ä¸Šç³»ç»Ÿ/SoC (System on Chip)</strong>:</p>
<ul>
<li>å•ä¸ªç¡…èŠ¯ç‰‡å°±å¯ä»¥ç”¨æ¥å®ç°æ•´ä¸ªç³»ç»Ÿçš„åŠŸèƒ½ï¼Œè€Œä¸æ˜¯éœ€è¦ç”¨å‡ ä¸ªä¸åŒçš„ç‰©ç†èŠ¯ç‰‡æ¥å®ç°ã€‚</li>
<li>å¸¸ç”¨äºæŒ‡ä¸“ç”¨é›†æˆç”µè·¯ï¼ˆApplication Specific Integrated Circuitï¼ŒASICï¼‰</li>
<li>å’Œæ¿ä¸Šç³»ç»Ÿ(åœ¨pcbæ¿ä¸­ç»„åˆå¤šä¸ªå…ƒä»¶)å¯¹æ¯”ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼š
<ul>
<li>å¼€å‘æ—¶é—´å’Œæˆæœ¬</li>
<li>éš¾ä»¥é‡ç”¨ï¼Œä¸å¤Ÿçµæ´»ï¼ˆä¸FPGAä¸åŒï¼Œç›´æ¥è®¾è®¡èŠ¯ç‰‡è®¾è®¡ï¼‰</li>
</ul>
</li>
<li><strong>ä¾‹å­</strong>ï¼šæ‰‹æœºï¼ŒPCï¼Œå¹³æ¿ç­‰çš„CPU</li>
</ul>
</li>
<li>
<p>Zynqï¼šçµæ´»çš„SoC çš„å¹³å°ï¼Œå…¨å¯ç¼–ç¨‹SoC ï¼ˆAll-Programmable SoCï¼ŒAPSoCï¼‰</p>
<ul>
<li>å¤„ç†ç³»ç»Ÿï¼ˆPSï¼‰ï¼šæ”¯æŒè½¯ä»¶ç¨‹åºå’Œ/ æˆ–æ“ä½œç³»ç»Ÿ</li>
<li>å¯ç¼–ç¨‹é€»è¾‘ï¼ˆPLï¼‰ï¼šå®ç°é«˜é€Ÿé€»è¾‘ã€ç®—æœ¯å’Œæ•°æ®æµå­ç³»ç»Ÿ</li>
<li>å·¥ä¸šæ ‡å‡†çš„é«˜çº§å¯æ‰©å±•æ¥å£ï¼ˆAdvanced eXtensible Interfaceï¼ŒAXIï¼‰è¿æ¥ã€‚<br>
<img src="https://Busy-Bob.github.io/post-images/1609400781987.png" alt="" loading="lazy"></li>
</ul>
</li>
<li>
<p>è½¯ç¡¬ä»¶ç³»ç»Ÿå…³ç³»<br>
<img src="https://Busy-Bob.github.io/post-images/1609401050095.png" alt="" loading="lazy"></p>
</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ZYNQä¸­çš„é€šä¿¡æ¥å£(åŒ…æ‹¬PSä¸PL)]]></title>
        <id>https://Busy-Bob.github.io/post/zynq-zhong-de-si-chong-tong-xin-jie-kou__/</id>
        <link href="https://Busy-Bob.github.io/post/zynq-zhong-de-si-chong-tong-xin-jie-kou__/">
        </link>
        <updated>2020-12-31T02:45:05.000Z</updated>
        <content type="html"><![CDATA[<p>æ€»ä½“æ¶æ„å›¾ä¸ºï¼š<br>
<img src="https://Busy-Bob.github.io/post-images/1609385485651.png" alt="" loading="lazy"></p>
<ul>
<li><strong>PS (Processing System)ä¸­å¯¹å¤–é€šä¿¡ç®¡è„š:</strong>ï¼š
<ul>
<li><strong>MIO</strong> (Multiplexed Input/Outputï¼ŒMIO)ï¼š åˆ©ç”¨å¤ç”¨çš„è¾“å…¥ / è¾“å‡ºï¼Œå’Œå¤–éƒ¨æ¥å£ä¹‹é—´é€šä¿¡ï¼Œä¸€å…±54 ä¸ªå¼•è„šã€‚MIOåœ¨zynqä¸Šçš„ç®¡è„šæ˜¯å›ºå®šçš„ï¼Œå ç”¨IOå·ä¸º0-53ã€‚</li>
<li><strong>EMIO</strong> (Extended MIOï¼ŒEMIO)ï¼š æ˜¯é€šè¿‡PLéƒ¨åˆ†æ‰©å±•çš„ï¼Œæ‰€ä»¥ä½¿ç”¨EMIOæ—¶å€™éœ€è¦åœ¨<strong>çº¦æŸæ–‡ä»¶ä¸­åˆ†é…ç®¡è„š</strong>ï¼Œå ç”¨IOå·ä¸º54-117ã€‚EMIO å¹¶ä¸æ˜¯ PS å’Œå¤–éƒ¨è¿æ¥ä¹‹é—´çš„ç›´æ¥é€šè·¯ï¼Œè€Œæ˜¯é€šè¿‡å…±ç”¨äº† PL çš„ I/O èµ„æºæ¥å®ç°çš„ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p><em>å½“éœ€è¦æ‰©å±•è¶…è¿‡ 54 ä¸ªå¼•è„šçš„æ—¶å€™å¯ä»¥ç”¨ EMIOï¼Œè€Œå½“ PL ä¸­å®ç°äº†ä¸€ä¸ª IP åŒ…çš„æ—¶å€™ï¼Œè¿™ä¹Ÿæ˜¯ PS å’Œ PL ä¸­çš„IP åŒ…æ¥å£çš„ä¸€ç§æ–¹æ³•(å³<strong>PSå¯ä»¥åˆ©ç”¨EMIOå’ŒPLè¿›è¡Œé€šä¿¡</strong>)</em></p>
</blockquote>
<ul>
<li>
<p>**PL (Programmable Logic) å’Œ PSçš„é€šä¿¡æ¥å£ **<br>
<img src="https://Busy-Bob.github.io/post-images/1609403066047.png" alt="" loading="lazy"></p>
<ul>
<li><strong>é€šç”¨AXIï¼ˆGeneral Purpose AXIï¼‰</strong>ï¼š ä¸€å…±æœ‰å››ä¸ªï¼Œå¯¹åº”å›¾ä¸­ä¸»æœºäº’è”å’Œä»æœºäº’è”ã€‚32 ä½æ•°æ®æ€»çº¿ï¼Œé€‚åˆPL å’ŒPS ä¹‹é—´çš„<strong>ä¸­ä½é€Ÿé€šä¿¡</strong>ã€‚æ¥å£æ˜¯é€ä¼ çš„ä¸å¸¦ç¼“å†²ã€‚</li>
<li><strong>åŠ é€Ÿå™¨ä¸€è‡´æ€§ç«¯å£ï¼ˆAccelerator Coherency Portï¼‰</strong>ï¼š åœ¨PL å’ŒAPU å†…çš„SCUä¹‹é—´çš„å•ä¸ªå¼‚æ­¥è¿æ¥ï¼Œæ€»çº¿å®½åº¦ä¸º64 ä½ã€‚è¿™ä¸ªç«¯å£ç”¨æ¥å®ç°APU cache å’ŒPLçš„å•å…ƒä¹‹é—´çš„ä¸€è‡´æ€§ï¼ˆç›´æ¥å’ŒPSä¸­çš„APUç›¸è¿ï¼‰</li>
<li><strong>é«˜æ€§èƒ½ç«¯å£ï¼ˆHigh Performance Portsï¼‰</strong>ï¼š å¸¦æœ‰FIFOç¼“å†²æ¥æä¾›â€œ æ‰¹é‡â€ è¯»å†™æ“ä½œï¼Œå¹¶æ”¯æŒPL å’ŒPS ä¸­çš„å­˜å‚¨å™¨å•å…ƒçš„é«˜é€Ÿç‡é€šä¿¡ã€‚æ•°æ®å®½åº¦æ˜¯32 æˆ–64 ä½ï¼Œåœ¨æ‰€æœ‰å››ä¸ªæ¥å£ä¸­PL éƒ½æ˜¯åšä¸»æœºçš„ã€‚<strong>(PLç›´æ¥ä»DDRä¸­è·å–æ•°æ®)</strong></li>
<li><strong>EMIO</strong>ï¼š åŸæœ¬æ˜¯ç”¨æ¥è¿æ¥I2Cç­‰åè®®çš„å¤–è®¾ï¼Œä¹Ÿå¯ä»¥ç»™PSä½¿ç”¨ã€‚</li>
</ul>
</li>
</ul>
<h1 id="pynqä¸­pythonç±»å¯¹åº”">PYNQä¸­pythonç±»å¯¹åº”ï¼š</h1>
<ul>
<li><strong>GPIO</strong>ï¼š å¯¹åº”MIOï¼Œ EMIOã€‚ï¼ˆç±»ä¼¼äºå•ç‰‡æœºä¸­çš„GPIOï¼‰</li>
<li><strong>MMIO</strong>ï¼š å¯¹åº”GP AXIï¼Œå³é€šç”¨AXIç«¯å£ã€‚ï¼ˆè°ƒç”¨IPæ ¸ï¼ŒPSç»™PLæ•°æ®æ—¶å€™ç”¨ï¼‰</li>
<li><strong>Xlnk</strong>ï¼š å¯¹åº”HP AXIï¼Œè®¿é—®DDRå†…å­˜ï¼Œå³é«˜æ€§èƒ½AXIç«¯å£ã€‚ï¼ˆè®¿é—®PS çš„ DRAMï¼Œ ç”¨ä»¥PLéœ€è¦å†…å­˜æ—¶å€™ï¼ŒPSåˆ†é…å†…å­˜ç»™PLï¼‰</li>
<li><strong>DMA</strong>ï¼š å¯¹åº”HP AXIï¼Œè®¿é—®DMAï¼Œå³é«˜æ€§èƒ½AXIç«¯å£</li>
</ul>
<h1 id="axi-åè®®">AXI åè®®</h1>
<ul>
<li>AXI4ï¼š  é€šè¿‡ä¸€ç°‡é«˜è¾¾256 ä¸ªæ•°æ®å­—ï¼ˆæˆ–â€œ æ•°æ®æ‹ï¼ˆdata beatsï¼‰â€ï¼‰çš„æ•°æ®ä¼ è¾“æ¥ç»™å®šä¸€ä¸ªåœ°å€ã€‚</li>
<li>AXI4_LITEï¼š åªæ”¯æŒæ¯æ¬¡è¿æ¥ä¼ è¾“ä¸€ä¸ªæ•°æ®ï¼ˆéæ‰¹é‡ï¼‰ã€‚</li>
<li>AXI4-Streamï¼š ç”¨äºé«˜é€Ÿæµæ•°æ®ï¼Œæ”¯æŒæ‰¹é‡ä¼ è¾“æ— é™å¤§å°çš„æ•°æ®ã€‚æ²¡æœ‰åœ°å€æœºåˆ¶ï¼Œè¿™ç§æ€»çº¿ç±»å‹æœ€é€‚åˆæºå’Œç›®çš„åœ°ä¹‹é—´çš„ç›´æ¥æ•°æ®æµã€‚</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[NAND Flash, NOR Flash çš„åŒºåˆ«å’Œåº”ç”¨]]></title>
        <id>https://Busy-Bob.github.io/post/nand-flash-nor-flash/</id>
        <link href="https://Busy-Bob.github.io/post/nand-flash-nor-flash/">
        </link>
        <updated>2020-12-29T14:06:01.000Z</updated>
        <content type="html"><![CDATA[<h2 id="flash-åŸç†">Flash åŸç†ï¼š</h2>
<p><img src="https://Busy-Bob.github.io/post-images/1609254997519.png" alt="" loading="lazy"><br>
<img src="https://Busy-Bob.github.io/post-images/1609253806308.png" alt="" loading="lazy"><br>
å‚è€ƒ<a href="https://www.youtube.com/watch?v=aO_kBa9DzPQ">youtube</a>ã€‚åœ¨æ§åˆ¶æ …æé«˜ç”µå‹æ—¶å€™ï¼Œæºææ¼æä¹‹é—´å¯¼é€šï¼Œç”µå­ä¼šç©¿è¿‡ç»ç¼˜å±‚å¾€æ§åˆ¶æ …æèµ°ï¼ˆç”µå­ä»è´Ÿæèµ°å‘æ­£æï¼‰ï¼Œæ§åˆ¶æ …ææ¢å¤åç”µå­å›°åœ¨é‡Œé¢ï¼Œè¡¨ç°å‡º0ã€‚å¦‚æœåªéœ€è¦ä¸€ä¸ªpageä¸­çš„æŸä¸€ä¸ªå°å•å…ƒä»1-&gt;0, é‚£ä¹ˆé™¤äº†å¯¹è¯¥pageçš„çºµå‘çº¿åŠ é«˜ç”µå‹ï¼Œä¹Ÿéœ€è¦å¯¹å…¶ä»–å•å…ƒçš„æ¨ªå‘çº¿åŠ é«˜ç”µå‹ï¼Œä½¿å¾—å…¶ä»–åœ°æ–¹ç”µå­ä¸å¾€æ§åˆ¶æ …æèµ°ã€‚</p>
<h2 id="nand-flash-å’Œ-nor-flash-åŒºåˆ«">NAND Flash å’Œ NOR Flash åŒºåˆ«</h2>
<figure data-type="image" tabindex="1"><img src="https://Busy-Bob.github.io/post-images/1609253097307.png" alt="" loading="lazy"></figure>
<ul>
<li><strong>NAND ä¸èƒ½å¤Ÿå–æŒ‡ä»¤ï¼ˆç±»ä¼¼äºç¡¬ç›˜ï¼‰</strong></li>
<li><strong>NOR å¯ä»¥å–æŒ‡ä»¤ï¼ˆç±»ä¼¼äºå†…å­˜ï¼‰</strong></li>
</ul>
<p>ç”±äºCPUè¿è¡Œæ—¶å€™éœ€è¦ä¸‰æ­¥ï¼š<strong>å–æŒ‡ã€è¯‘ç ã€æ‰§è¡Œ</strong> ä¸‰ä¸ªæ­¥éª¤ã€‚ç”±äº NORçš„åœ°å€çº¿å’Œæ•°æ®çº¿åˆ†å¼€ï¼Œå®ƒå¯ä»¥æŒ‰â€œå­—èŠ‚â€è¯»å†™æ•°æ®ï¼Œç¬¦åˆ CPU çš„æŒ‡ä»¤è¯‘ç æ‰§è¡Œè¦æ±‚ï¼Œæ‰€ä»¥å‡å¦‚ NORä¸Šå­˜å‚¨äº†ä»£ç æŒ‡ä»¤ï¼Œ CPU ç»™ NORä¸€ä¸ªåœ°å€ï¼Œ NOR å°±èƒ½å‘CPU è¿”å›ä¸€æ¡æŒ‡ä»¤è®© CPU æ‰§è¡Œï¼Œä¸­é—´ä¸éœ€è¦é¢å¤–çš„å¤„ç†æ“ä½œã€‚æ‰€ä»¥NOR Flashæ˜¯å¯ä»¥ç”¨äºæ‰§è¡Œçš„ï¼Œå³æ”¯æŒXIP(eXecute In Place) ã€‚</p>
<h2 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h2>
<ul>
<li><strong>NOR Flash å°å®¹é‡ï¼Œå…·å¤‡éšæœºè®¿é—®èƒ½åŠ›ï¼Œå¯æ‰§è¡Œã€‚ï¼ˆç”¨äºæ‰§è¡Œç‰‡ä¸Šç¨‹åºï¼ŒBIOSï¼‰</strong></li>
<li><strong>NAND Flash å¤§å®¹é‡ï¼Œä¸å…·å¤‡éšæœºè®¿é—®èƒ½åŠ›ã€‚ï¼ˆSSDï¼ŒUç›˜ç­‰ï¼‰</strong></li>
</ul>
<h2 id="ssdå’Œuç›˜åŒºåˆ«">SSDå’ŒUç›˜åŒºåˆ«</h2>
<blockquote>
<p>å‚¨å­˜ä»‹è´¨ä¸ä¸€æ ·ï¼šå›ºæ€ç¡¬ç›˜ç”¨çš„å‚¨å­˜èŠ¯ç‰‡ä»·æ ¼è¿œè¿œé«˜äºUç›˜ç”¨çš„<br>
ä¸»æ§èŠ¯ç‰‡ä¸ä¸€æ ·ï¼šæŠŠèŠ¯ç‰‡çš„è¯»å†™æ¨¡å¼å®‰æ’å¥½æ˜¯ä¸»æ§èŠ¯ç‰‡çš„äº‹ï¼ŒUç›˜åŸºæœ¬ä¸Šåœ¨è¿™ä¸ªä¸Šé¢æ²¡åšä»€ä¹ˆ<br>
å­˜å‚¨æ¨¡å¼ä¸ä¸€æ ·ï¼šå›ºæ€ç¡¬ç›˜æ˜¯å¤šèŠ¯ç‰‡ç»„æˆï¼Œåœ¨è¯»ä¹¦æ—¶ï¼Œåœ¨ä¸»æ§çš„å®‰æ’ä¸‹ï¼Œé€šå¸¸éƒ½èƒ½å¤šè·¯å¹¶å‘<br>
æ¥å£æ¨¡å¼ä¸ä¸€æ ·ï¼šå›ºæ€ç¡¬ç›˜çš„æ¥å£ä¸°å¯Œï¼Œä¸ç®¡å“ªä¸ªæ¥å£ï¼Œéƒ½æ¯”USBå¿«</p>
<p>ä½œè€…ï¼šæè¯—å<br>
é“¾æ¥ï¼šhttps://www.zhihu.com/question/265335741/answer/292414149<br>
æ¥æºï¼šçŸ¥ä¹</p>
</blockquote>
]]></content>
    </entry>
</feed>